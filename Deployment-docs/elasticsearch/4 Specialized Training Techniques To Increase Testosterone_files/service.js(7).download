!function(t,e){sumo.define("plugins/css",[],function(){if("undefined"==typeof window)return{load:function(t,e,r){r()}};var t=document.getElementsByTagName("head")[0],e=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,r=!1,i=!0;e[1]||e[7]?r=parseInt(e[1])<6||parseInt(e[7])<=9:e[2]?i=!1:e[4]&&(r=parseInt(e[4])<18);var n={};n.pluginBuilder="./css-builder";var s,o=function(){s=document.createElement("style"),t.appendChild(s)},a=function(t,e){o();var r=s.styleSheet||s.sheet;if(r&&r.addImport)r.addImport(t),s.onload=e;else{s.textContent='@import "'+t+'";';var i=setInterval(function(){try{s.sheet.cssRules,clearInterval(i),e()}catch(t){}},10)}},u=function(e,r){var n=document.createElement("link");if(n.type="text/css",n.rel="stylesheet",i)n.onload=function(){n.onload=function(){},setTimeout(r,7)};else var s=setInterval(function(){for(var t=0;t<document.styleSheets.length;t++){var e=document.styleSheets[t];if(e.href==n.href)return clearInterval(s),r()}},10);n.href=e,t.appendChild(n)};return n.normalize=function(t,e){return".css"==t.substr(t.length-4,4)&&(t=t.substr(0,t.length-4)),e(t)},n.load=function(t,e,i,n){(r?a:u)(e.toUrl(t+".css"),i)},n}),sumo.define("punycode",function(){}),sumo.define("IPv6",function(){}),sumo.define("SecondLevelDomains",function(){}),function(r,i){"object"==typeof t?e.exports=i(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof sumo.define&&sumo.define.amd?sumo.define("URI",["./punycode","./IPv6","./SecondLevelDomains"],i):r.URI=i(r.punycode,r.IPv6,r.SecondLevelDomains,r)}(this,function(t,e,r,i){"use strict";function n(t,e){return this instanceof n?(void 0===t&&(t="undefined"!=typeof location?location.href+"":""),this.href(t),void 0!==e?this.absoluteTo(e):this):new n(t,e)}function s(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function o(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function a(t){return"Array"===o(t)}function u(t,e){var r={},i,n;if(a(e))for(i=0,n=e.length;n>i;i++)r[e[i]]=!0;else r[e]=!0;for(i=0,n=t.length;n>i;i++)void 0!==r[t[i]]&&(t.splice(i,1),n--,i--);return t}function l(t,e){var r,i;if(a(e)){for(r=0,i=e.length;i>r;r++)if(!l(t,e[r]))return!1;return!0}var n=o(e);for(r=0,i=t.length;i>r;r++)if("RegExp"===n){if("string"==typeof t[r]&&t[r].match(e))return!0}else if(t[r]===e)return!0;return!1}function f(t,e){if(!a(t)||!a(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var r=0,i=t.length;i>r;r++)if(t[r]!==e[r])return!1;return!0}function c(t){return escape(t)}function p(t){return encodeURIComponent(t).replace(/[!'()*]/g,c).replace(/\*/g,"%2A")}var d=i&&i.URI;n.version="1.12.0";var h=n.prototype,m=Object.prototype.hasOwnProperty;n._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:n.duplicateQueryParameters,escapeQuerySpace:n.escapeQuerySpace}},n.duplicateQueryParameters=!1,n.escapeQuerySpace=!0,n.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,n.idn_expression=/[^a-z0-9\.-]/i,n.punycode_expression=/(xn--)/i,n.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,n.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,n.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/},n.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},n.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,n.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},n.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return n.domAttributes[e]}},n.encode=p,n.decode=decodeURIComponent,n.iso8859=function(){n.encode=escape,n.decode=unescape},n.unicode=function(){n.encode=p,n.decode=decodeURIComponent},n.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},n.encodeQuery=function(t,e){var r=n.encode(t+"");return e?r.replace(/%20/g,"+"):r},n.decodeQuery=function(t,e){t+="";try{return n.decode(e?t.replace(/\+/g,"%20"):t)}catch(r){return t}},n.recodePath=function(t){for(var e=(t+"").split("/"),r=0,i=e.length;i>r;r++)e[r]=n.encodePathSegment(n.decode(e[r]));return e.join("/")},n.decodePath=function(t){for(var e=(t+"").split("/"),r=0,i=e.length;i>r;r++)e[r]=n.decodePathSegment(e[r]);return e.join("/")};var g={encode:"encode",decode:"decode"},y,v=function(t,e){return function(r){return n[e](r+"").replace(n.characters[t][e].expression,function(r){return n.characters[t][e].map[r]})}};for(y in g)n[y+"PathSegment"]=v("pathname",g[y]);n.encodeReserved=v("reserved","encode"),n.parse=function(t,e){var r;return e||(e={}),r=t.indexOf("#"),r>-1&&(e.fragment=t.substring(r+1)||null,t=t.substring(0,r)),r=t.indexOf("?"),r>-1&&(e.query=t.substring(r+1)||null,t=t.substring(0,r)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=n.parseAuthority(t,e)):(r=t.indexOf(":"),r>-1&&(e.protocol=t.substring(0,r)||null,e.protocol&&!e.protocol.match(n.protocol_expression)?e.protocol=void 0:"file"===e.protocol?t=t.substring(r+3):"//"===t.substring(r+1,r+3)?(t=t.substring(r+3),t=n.parseAuthority(t,e)):(t=t.substring(r+1),e.urn=!0))),e.path=t,e},n.parseHost=function(t,e){var r=t.indexOf("/"),i,n;return-1===r&&(r=t.length),"["===t.charAt(0)?(i=t.indexOf("]"),e.hostname=t.substring(1,i)||null,e.port=t.substring(i+2,r)||null):t.indexOf(":")!==t.lastIndexOf(":")?(e.hostname=t.substring(0,r)||null,e.port=null):(n=t.substring(0,r).split(":"),e.hostname=n[0]||null,e.port=n[1]||null),e.hostname&&"/"!==t.substring(r).charAt(0)&&(r++,t="/"+t),t.substring(r)||"/"},n.parseAuthority=function(t,e){return t=n.parseUserinfo(t,e),n.parseHost(t,e)},n.parseUserinfo=function(t,e){var r=t.indexOf("/"),i=r>-1?t.lastIndexOf("@",r):t.indexOf("@"),s;return i>-1&&(-1===r||r>i)?(s=t.substring(0,i).split(":"),e.username=s[0]?n.decode(s[0]):null,s.shift(),e.password=s[0]?n.decode(s.join(":")):null,t=t.substring(i+1)):(e.username=null,e.password=null),t},n.parseQuery=function(t,e){if(!t)return{};if(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!t)return{};for(var r={},i=t.split("&"),s=i.length,o,a,u,l=0;s>l;l++)o=i[l].split("="),a=n.decodeQuery(o.shift(),e),u=o.length?n.decodeQuery(o.join("="),e):null,r[a]?("string"==typeof r[a]&&(r[a]=[r[a]]),r[a].push(u)):r[a]=u;return r},n.build=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//"),e+=n.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},n.buildHost=function(t){var e="";return t.hostname?(n.ip6_expression.test(t.hostname)?e+=t.port?"["+t.hostname+"]:"+t.port:t.hostname:(e+=t.hostname,t.port&&(e+=":"+t.port)),e):""},n.buildAuthority=function(t){return n.buildUserinfo(t)+n.buildHost(t)},n.buildUserinfo=function(t){var e="";return t.username&&(e+=n.encode(t.username),t.password&&(e+=":"+n.encode(t.password)),e+="@"),e},n.buildQuery=function(t,e,r){var i="",s,o,u,l;for(o in t)if(m.call(t,o)&&o)if(a(t[o]))for(s={},u=0,l=t[o].length;l>u;u++)void 0!==t[o][u]&&void 0===s[t[o][u]+""]&&(i+="&"+n.buildQueryParameter(o,t[o][u],r),e!==!0&&(s[t[o][u]+""]=!0));else void 0!==t[o]&&(i+="&"+n.buildQueryParameter(o,t[o],r));return i.substring(1)},n.buildQueryParameter=function(t,e,r){return n.encodeQuery(t,r)+(null!==e?"="+n.encodeQuery(e,r):"")},n.addQuery=function(t,e,r){if("object"==typeof e)for(var i in e)m.call(e,i)&&n.addQuery(t,i,e[i]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=r);"string"==typeof t[e]&&(t[e]=[t[e]]),a(r)||(r=[r]),t[e]=t[e].concat(r)}},n.removeQuery=function(t,e,r){var i,s,o;if(a(e))for(i=0,s=e.length;s>i;i++)t[e[i]]=void 0;else if("object"==typeof e)for(o in e)m.call(e,o)&&n.removeQuery(t,o,e[o]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==r?t[e]===r?t[e]=void 0:a(t[e])&&(t[e]=u(t[e],r)):t[e]=void 0}},n.hasQuery=function(t,e,r,i){if("object"==typeof e){for(var s in e)if(m.call(e,s)&&!n.hasQuery(t,s,e[s]))return!1;return!0}if("string"!=typeof e)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(o(r)){case"Undefined":return e in t;case"Boolean":var u=Boolean(a(t[e])?t[e].length:t[e]);return r===u;case"Function":return!!r(t[e],e,t);case"Array":if(!a(t[e]))return!1;var c=i?l:f;return c(t[e],r);case"RegExp":return a(t[e])?i?l(t[e],r):!1:Boolean(t[e]&&t[e].match(r));case"Number":r=String(r);case"String":return a(t[e])?i?l(t[e],r):!1:t[e]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},n.commonPath=function(t,e){var r=Math.min(t.length,e.length),i;for(i=0;r>i;i++)if(t.charAt(i)!==e.charAt(i)){i--;break}return 1>i?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":(("/"!==t.charAt(i)||"/"!==e.charAt(i))&&(i=t.substring(0,i).lastIndexOf("/")),t.substring(0,i+1))},n.withinString=function(t,e,r){r||(r={});var i=r.start||n.findUri.start,s=r.end||n.findUri.end,o=r.trim||n.findUri.trim,a=/[a-z0-9-]=["']?$/i;for(i.lastIndex=0;;){var u=i.exec(t);if(!u)break;var l=u.index;if(r.ignoreHtml){var f=t.slice(Math.max(l-3,0),l);if(f&&a.test(f))continue}var c=l+t.slice(l).search(s),p=t.slice(l,c).replace(o,"");if(!r.ignore||!r.ignore.test(p)){c=l+p.length;var d=e(p,l,c,t);t=t.slice(0,l)+d+t.slice(c),i.lastIndex=l+d.length}}return i.lastIndex=0,t},n.ensureValidHostname=function(e){if(e.match(n.invalid_hostname_characters)){if(!t)throw new TypeError("Hostname '"+e+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(t.toASCII(e).match(n.invalid_hostname_characters))throw new TypeError("Hostname '"+e+"' contains characters other than [A-Z0-9.-]")}},n.noConflict=function(t){if(t){var r={URI:this.noConflict()};return URITemplate&&"function"==typeof URITemplate.noConflict&&(r.URITemplate=URITemplate.noConflict()),e&&"function"==typeof e.noConflict&&(r.IPv6=e.noConflict()),SecondLevelDomains&&"function"==typeof SecondLevelDomains.noConflict&&(r.SecondLevelDomains=SecondLevelDomains.noConflict()),r}return i.URI===this&&(i.URI=d),this},h.build=function(t){return t===!0?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=n.build(this._parts),this._deferred_build=!1),this},h.clone=function(){return new n(this)},h.valueOf=h.toString=function(){return this.build(!1)._string},g={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},v=function(t){return function(e,r){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!r),this)}};for(y in g)h[y]=v(g[y]);g={query:"?",fragment:"#"},v=function(t,e){return function(r,i){return void 0===r?this._parts[t]||"":(null!==r&&(r+="",r.charAt(0)===e&&(r=r.substring(1))),this._parts[t]=r,this.build(!i),this)}};for(y in g)h[y]=v(y,g[y]);g={search:["?","query"],hash:["#","fragment"]},v=function(t,e){return function(r,i){var n=this[t](r,i);return"string"==typeof n&&n.length?e+n:n}};for(y in g)h[y]=v(g[y][1],g[y][0]);h.pathname=function(t,e){if(void 0===t||t===!0){var r=this._parts.path||(this._parts.hostname?"/":"");return t?n.decodePath(r):r}return this._parts.path=t?n.recodePath(t):"/",this.build(!e),this},h.path=h.pathname,h.href=function(t,e){var r;if(void 0===t)return this.toString();this._string="",this._parts=n._parts();var i=t instanceof n,s="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName){var o=n.getDomAttribute(t);t=t[o]||"",s=!1}if(!i&&s&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t)this._parts=n.parse(t,this._parts);else{if(!i&&!s)throw new TypeError("invalid input");var a=i?t._parts:t;for(r in a)m.call(this._parts,r)&&(this._parts[r]=a[r])}return this.build(!e),this},h.is=function(t){var e=!1,i=!1,s=!1,o=!1,a=!1,u=!1,l=!1,f=!this._parts.urn;switch(this._parts.hostname&&(f=!1,i=n.ip4_expression.test(this._parts.hostname),s=n.ip6_expression.test(this._parts.hostname),e=i||s,o=!e,a=o&&r&&r.has(this._parts.hostname),u=o&&n.idn_expression.test(this._parts.hostname),l=o&&n.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return f;case"absolute":return!f;case"domain":case"name":return o;case"sld":return a;case"ip":return e;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return s;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return l}return null};var b=h.protocol,_=h.port,w=h.hostname;h.protocol=function(t,e){if(void 0!==t&&t&&(t=t.replace(/:(\/\/)?$/,""),!t.match(n.protocol_expression)))throw new TypeError("Protocol '"+t+"' contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return b.call(this,t,e)},h.scheme=h.protocol,h.port=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(t+="",":"===t.charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError("Port '"+t+"' contains characters other than [0-9]");return _.call(this,t,e)},h.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var r={};n.parseHost(t,r),t=r.hostname}return w.call(this,t,e)},h.host=function(t,e){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?n.buildHost(this._parts):"":(n.parseHost(t,this._parts),this.build(!e),this)},h.authority=function(t,e){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?n.buildAuthority(this._parts):"":(n.parseAuthority(t,this._parts),this.build(!e),this)},h.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.username)return"";var r=n.buildUserinfo(this._parts);return r.substring(0,r.length-1)}return"@"!==t[t.length-1]&&(t+="@"),n.parseUserinfo(t,this._parts),this.build(!e),this},h.resource=function(t,e){var r;return void 0===t?this.path()+this.search()+this.hash():(r=n.parse(t),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!e),this)},h.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var i=this._parts.hostname.length-this.domain().length,o=this._parts.hostname.substring(0,i),a=new RegExp("^"+s(o));return t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&n.ensureValidHostname(t),this._parts.hostname=this._parts.hostname.replace(a,t),this.build(!e),this},h.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var i=this._parts.hostname.length-this.tld(e).length-1;return i=this._parts.hostname.lastIndexOf(".",i-1)+1,this._parts.hostname.substring(i)||""}if(!t)throw new TypeError("cannot set domain empty");if(n.ensureValidHostname(t),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var o=new RegExp(s(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(o,t)}return this.build(!e),this},h.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.lastIndexOf("."),n=this._parts.hostname.substring(i+1);return e!==!0&&r&&r.list[n.toLowerCase()]?r.get(this._parts.hostname)||n:n}var o;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(t))throw new TypeError("TLD '"+t+"' contains characters other than [A-Z0-9]");o=new RegExp(s(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");o=new RegExp(s(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,t)}return this.build(!e),this},h.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return t?n.decodePath(i):i}var o=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,o),u=new RegExp("^"+s(a));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=n.recodePath(t),this._parts.path=this._parts.path.replace(u,t),this.build(!e),this},h.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),i=this._parts.path.substring(r+1);return t?n.decodePathSegment(i):i}var o=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(o=!0);var a=new RegExp(s(this.filename())+"$");return t=n.recodePath(t),this._parts.path=this._parts.path.replace(a,t),o?this.normalizePath(e):this.build(!e),this},h.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r=this.filename(),i=r.lastIndexOf("."),o,a;return-1===i?"":(o=r.substring(i+1),a=/^[a-z0-9%]+$/i.test(o)?o:"",t?n.decodePathSegment(a):a)}"."===t.charAt(0)&&(t=t.substring(1));var u=this.suffix(),l;if(u)l=t?new RegExp(s(u)+"$"):new RegExp(s("."+u)+"$");else{if(!t)return this;this._parts.path+="."+n.recodePath(t)}return l&&(t=n.recodePath(t),this._parts.path=this._parts.path.replace(l,t)),this.build(!e),this},h.segment=function(t,e,r){var i=this._parts.urn?":":"/",n=this.path(),s="/"===n.substring(0,1),o=n.split(i);if(void 0!==t&&"number"!=typeof t&&(r=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error("Bad segment '"+t+"', must be 0-based integer");if(s&&o.shift(),0>t&&(t=Math.max(o.length+t,0)),void 0===e)return void 0===t?o:o[t];if(null===t||void 0===o[t])if(a(e)){o=[];for(var u=0,l=e.length;l>u;u++)(e[u].length||o.length&&o[o.length-1].length)&&(o.length&&!o[o.length-1].length&&o.pop(),o.push(e[u]))}else(e||"string"==typeof e)&&(""===o[o.length-1]?o[o.length-1]=e:o.push(e));else e||"string"==typeof e&&e.length?o[t]=e:o.splice(t,1);return s&&o.unshift(""),this.path(o.join(i),r)},h.segmentCoded=function(t,e,r){var i,s,o;if("number"!=typeof t&&(r=e,e=t,t=void 0),void 0===e){if(i=this.segment(t,e,r),a(i))for(s=0,o=i.length;o>s;s++)i[s]=n.decode(i[s]);else i=void 0!==i?n.decode(i):void 0;return i}if(a(e))for(s=0,o=e.length;o>s;s++)e[s]=n.decode(e[s]);else e="string"==typeof e?n.encode(e):e;return this.segment(t,e,r)};var x=h.query;return h.query=function(t,e){if(t===!0)return n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var r=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace),i=t.call(this,r);return this._parts.query=n.buildQuery(i||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=n.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):x.call(this,t,e)},h.setQuery=function(t,e,r){var i=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"==typeof t)for(var s in t)m.call(t,s)&&(i[s]=t[s]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");i[t]=void 0!==e?e:null}return this._parts.query=n.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},h.addQuery=function(t,e,r){var i=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.addQuery(i,t,void 0===e?null:e),this._parts.query=n.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},h.removeQuery=function(t,e,r){var i=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.removeQuery(i,t,e),this._parts.query=n.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},h.hasQuery=function(t,e,r){var i=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.hasQuery(i,t,e,r)},h.setSearch=h.setQuery,h.addSearch=h.addQuery,h.removeSearch=h.removeQuery,h.hasSearch=h.hasQuery,h.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},h.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},h.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},h.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===n.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},h.normalizePath=function(t){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var e,r=this._parts.path,i="",s,o;for("/"!==r.charAt(0)&&(e=!0,r="/"+r),r=r.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(i=r.substring(1).match(/^(\.\.\/)+/)||"",i&&(i=i[0]));;){if(s=r.indexOf("/.."),-1===s)break;0!==s?(o=r.substring(0,s).lastIndexOf("/"),-1===o&&(o=s),r=r.substring(0,o)+r.substring(s+3)):r=r.substring(3)}return e&&this.is("relative")&&(r=i+r.substring(1)),r=n.recodePath(r),this._parts.path=r,this.build(!t),this},h.normalizePathname=h.normalizePath,h.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(n.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},h.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},h.normalizeSearch=h.normalizeQuery,h.normalizeHash=h.normalizeFragment,h.iso8859=function(){var t=n.encode,e=n.decode;return n.encode=escape,n.decode=decodeURIComponent,this.normalize(),n.encode=t,n.decode=e,this},h.unicode=function(){var t=n.encode,e=n.decode;return n.encode=p,n.decode=unescape,this.normalize(),n.encode=t,n.decode=e,this},h.readable=function(){var e=this.clone();e.username("").password("").normalize();var r="";if(e._parts.protocol&&(r+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(r+=t.toUnicode(e._parts.hostname),e._parts.port&&(r+=":"+e._parts.port)):r+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(r+="/"),r+=e.path(!0),e._parts.query){for(var i="",s=0,o=e._parts.query.split("&"),a=o.length;a>s;s++){var u=(o[s]||"").split("=");i+="&"+n.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==u[1]&&(i+="="+n.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+i.substring(1)}return r+=n.decodeQuery(e.hash(),!0)},h.absoluteTo=function(t){var e=this.clone(),r=["protocol","username","password","hostname","port"],i,s,o;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof n||(t=new n(t)),e._parts.protocol||(e._parts.protocol=t._parts.protocol),this._parts.hostname)return e;for(s=0;o=r[s];s++)e._parts[o]=t._parts[o];return e._parts.path?".."===e._parts.path.substring(-2)&&(e._parts.path+="/"):(e._parts.path=t._parts.path,e._parts.query||(e._parts.query=t._parts.query)),"/"!==e.path().charAt(0)&&(i=t.directory(),e._parts.path=(i?i+"/":"")+e._parts.path,e.normalizePath()),e.build(),e},h.relativeTo=function(t){var e=this.clone().normalize(),r,i,s,o,a;if(e._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new n(t).normalize(),r=e._parts,i=t._parts,o=e.path(),a=t.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(r.protocol===i.protocol&&(r.protocol=null),r.username!==i.username||r.password!==i.password)return e.build();if(null!==r.protocol||null!==r.username||null!==r.password)return e.build();if(r.hostname!==i.hostname||r.port!==i.port)return e.build();if(r.hostname=null,r.port=null,o===a)return r.path="",e.build();if(s=n.commonPath(e.path(),t.path()),!s)return e.build();var u=i.path.substring(s.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return r.path=u+r.path.substring(s.length),e.build()},h.equals=function(t){var e=this.clone(),r=new n(t),i={},s={},o={},u,l,c;if(e.normalize(),r.normalize(),e.toString()===r.toString())return!0;if(u=e.query(),l=r.query(),e.query(""),r.query(""),e.toString()!==r.toString())return!1;if(u.length!==l.length)return!1;i=n.parseQuery(u,this._parts.escapeQuerySpace),s=n.parseQuery(l,this._parts.escapeQuerySpace);for(c in i)if(m.call(i,c)){if(a(i[c])){if(!f(i[c],s[c]))return!1}else if(i[c]!==s[c])return!1;o[c]=!0}for(c in s)if(m.call(s,c)&&!o[c])return!1;return!0},h.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},h.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},n}),function(){var r=this,i=r._,n={},s=Array.prototype,o=Object.prototype,a=Function.prototype;try{var u=document.createElement("iframe");u.style.display="none",document.body.appendChild(u),a=u.contentWindow.Function.prototype,s=u.contentWindow.Array.prototype,o=u.contentWindow.Object.prototype,u.parentNode.removeChild(u)}catch(l){}var f=s.push,c=s.slice,p=s.concat,d=o.toString,h=o.hasOwnProperty,m=s.forEach,g=s.map,y=s.reduce,v=s.reduceRight,b=s.filter,_=s.every,w=s.some,x=s.indexOf,B=s.lastIndexOf,T=Array.isArray,S=Object.keys,A=a.bind,E=function(t){return t instanceof E?t:this instanceof E?void(this._wrapped=t):new E(t)};"undefined"!=typeof t?("undefined"!=typeof e&&e.exports&&(t=e.exports=E),t._=E):r!=window&&(r._=E),E.VERSION="1.5.2";var C=E.each=E.forEach=function(t,e,r){if(null!=t)if(m&&t.forEach===m)t.forEach(e,r);else if(t.length===+t.length){for(var i=0,s=t.length;s>i;i++)if(e.call(r,t[i],i,t)===n)return}else for(var o=E.keys(t),i=0,s=o.length;s>i;i++)if(e.call(r,t[o[i]],o[i],t)===n)return};E.map=E.collect=function(t,e,r){var i=[];return null==t?i:g&&t.map===g?t.map(e,r):(C(t,function(t,n,s){i.push(e.call(r,t,n,s))}),i)};var O="Reduce of empty array with no initial value";E.reduce=E.foldl=E.inject=function(t,e,r,i){var n=arguments.length>2;if(null==t&&(t=[]),y&&t.reduce===y)return i&&(e=E.bind(e,i)),n?t.reduce(e,r):t.reduce(e);if(C(t,function(t,s,o){n?r=e.call(i,r,t,s,o):(r=t,n=!0)}),!n)throw new TypeError(O);return r},E.reduceRight=E.foldr=function(t,e,r,i){var n=arguments.length>2;if(null==t&&(t=[]),v&&t.reduceRight===v)return i&&(e=E.bind(e,i)),n?t.reduceRight(e,r):t.reduceRight(e);var s=t.length;if(s!==+s){var o=E.keys(t);s=o.length}if(C(t,function(a,u,l){u=o?o[--s]:--s,n?r=e.call(i,r,t[u],u,l):(r=t[u],n=!0)}),!n)throw new TypeError(O);return r},E.find=E.detect=function(t,e,r){var i;return k(t,function(t,n,s){return e.call(r,t,n,s)?(i=t,!0):void 0}),i},E.filter=E.select=function(t,e,r){var i=[];return null==t?i:b&&t.filter===b?t.filter(e,r):(C(t,function(t,n,s){e.call(r,t,n,s)&&i.push(t)}),i)},E.reject=function(t,e,r){return E.filter(t,function(t,i,n){return!e.call(r,t,i,n)},r)},E.every=E.all=function(t,e,r){e||(e=E.identity);var i=!0;return null==t?i:_&&t.every===_?t.every(e,r):(C(t,function(t,s,o){return(i=i&&e.call(r,t,s,o))?void 0:n}),!!i)};var k=E.some=E.any=function(t,e,r){e||(e=E.identity);var i=!1;return null==t?i:w&&t.some===w?t.some(e,r):(C(t,function(t,s,o){return i||(i=e.call(r,t,s,o))?n:void 0}),!!i)};E.contains=E.include=function(t,e){return null==t?!1:x&&t.indexOf===x?-1!=t.indexOf(e):k(t,function(t){return t===e})},E.invoke=function(t,e){var r=c.call(arguments,2),i=E.isFunction(e);return E.map(t,function(t){return(i?e:t[e]).apply(t,r)})},E.pluck=function(t,e){return E.map(t,function(t){return t[e]})},E.where=function(t,e,r){return E.isEmpty(e)?r?void 0:[]:E[r?"find":"filter"](t,function(t){for(var r in e)if(e[r]!==t[r])return!1;return!0})},E.findWhere=function(t,e){return E.where(t,e,!0)},E.max=function(t,e,r){if(!e&&E.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&E.isEmpty(t))return-(1/0);var i={computed:-(1/0),value:-(1/0)};return C(t,function(t,n,s){var o=e?e.call(r,t,n,s):t;o>i.computed&&(i={value:t,computed:o})}),i.value},E.min=function(t,e,r){if(!e&&E.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&E.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return C(t,function(t,n,s){var o=e?e.call(r,t,n,s):t;o<i.computed&&(i={value:t,computed:o})}),i.value},E.shuffle=function(t){var e,r=0,i=[];return C(t,function(t){e=E.random(r++),i[r-1]=i[e],i[e]=t}),i},E.sample=function(t,e,r){return arguments.length<2||r?t[E.random(t.length-1)]:E.shuffle(t).slice(0,Math.max(0,e))};var I=function(t){return E.isFunction(t)?t:function(e){return e[t]}};E.sortBy=function(t,e,r){var i=I(e);return E.pluck(E.map(t,function(t,e,n){return{value:t,index:e,criteria:i.call(r,t,e,n)}}).sort(function(t,e){var r=t.criteria,i=e.criteria;if(r!==i){if(r>i||void 0===r)return 1;if(i>r||void 0===i)return-1}return t.index-e.index}),"value")};var P=function(t){return function(e,r,i){var n={},s=null==r?E.identity:I(r);return C(e,function(r,o){var a=s.call(i,r,o,e);t(n,a,r)}),n}};E.groupBy=P(function(t,e,r){(E.has(t,e)?t[e]:t[e]=[]).push(r)}),E.indexBy=P(function(t,e,r){t[e]=r}),E.countBy=P(function(t,e){E.has(t,e)?t[e]++:t[e]=1}),E.sortedIndex=function(t,e,r,i){
r=null==r?E.identity:I(r);for(var n=r.call(i,e),s=0,o=t.length;o>s;){var a=s+o>>>1;r.call(i,t[a])<n?s=a+1:o=a}return s},E.toArray=function(t){return t?E.isArray(t)?c.call(t):t.length===+t.length?E.map(t,E.identity):E.values(t):[]},E.size=function(t){return null==t?0:t.length===+t.length?t.length:E.keys(t).length},E.first=E.head=E.take=function(t,e,r){return null!=t?null==e||r?t[0]:c.call(t,0,e):void 0},E.initial=function(t,e,r){return c.call(t,0,t.length-(null==e||r?1:e))},E.last=function(t,e,r){return null!=t?null==e||r?t[t.length-1]:c.call(t,Math.max(t.length-e,0)):void 0},E.rest=E.tail=E.drop=function(t,e,r){return c.call(t,null==e||r?1:e)},E.compact=function(t){return E.filter(t,E.identity)};var Q=function(t,e,r){return e&&E.every(t,E.isArray)?p.apply(r,t):(C(t,function(t){E.isArray(t)||E.isArguments(t)?e?f.apply(r,t):Q(t,e,r):r.push(t)}),r)};E.flatten=function(t,e){return Q(t,e,[])},E.without=function(t){return E.difference(t,c.call(arguments,1))},E.uniq=E.unique=function(t,e,r,i){E.isFunction(e)&&(i=r,r=e,e=!1);var n=r?E.map(t,r,i):t,s=[],o=[];return C(n,function(r,i){(e?i&&o[o.length-1]===r:E.contains(o,r))||(o.push(r),s.push(t[i]))}),s},E.union=function(){return E.uniq(E.flatten(arguments,!0))},E.intersection=function(t){var e=c.call(arguments,1);return E.filter(E.uniq(t),function(t){return E.every(e,function(e){return E.indexOf(e,t)>=0})})},E.difference=function(t){var e=p.apply(s,c.call(arguments,1));return E.filter(t,function(t){return!E.contains(e,t)})},E.zip=function(){for(var t=E.max(E.pluck(arguments,"length").concat(0)),e=new Array(t),r=0;t>r;r++)e[r]=E.pluck(arguments,""+r);return e},E.object=function(t,e){if(null==t)return{};for(var r={},i=0,n=t.length;n>i;i++)e?r[t[i]]=e[i]:r[t[i][0]]=t[i][1];return r},E.indexOf=function(t,e,r){if(null==t)return-1;var i=0,n=t.length;if(r){if("number"!=typeof r)return i=E.sortedIndex(t,e),t[i]===e?i:-1;i=0>r?Math.max(0,n+r):r}if(x&&t.indexOf===x)return t.indexOf(e,r);for(;n>i;i++)if(t[i]===e)return i;return-1},E.lastIndexOf=function(t,e,r){if(null==t)return-1;var i=null!=r;if(B&&t.lastIndexOf===B)return i?t.lastIndexOf(e,r):t.lastIndexOf(e);for(var n=i?r:t.length;n--;)if(t[n]===e)return n;return-1},E.range=function(t,e,r){arguments.length<=1&&(e=t||0,t=0),r=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/r),0),n=0,s=new Array(i);i>n;)s[n++]=t,t+=r;return s};var j=function(){};E.bind=function(t,e){var r,i;if(A&&t.bind===A)return A.apply(t,c.call(arguments,1));if(!E.isFunction(t))throw new TypeError;return r=c.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,r.concat(c.call(arguments)));j.prototype=t.prototype;var n=new j;j.prototype=null;var s=t.apply(n,r.concat(c.call(arguments)));return Object(s)===s?s:n}},E.partial=function(t){var e=c.call(arguments,1);return function(){return t.apply(this,e.concat(c.call(arguments)))}},E.bindAll=function(t){var e=c.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return C(e,function(e){t[e]=E.bind(t[e],t)}),t},E.memoize=function(t,e){var r={};return e||(e=E.identity),function(){var i=e.apply(this,arguments);return E.has(r,i)?r[i]:r[i]=t.apply(this,arguments)}},E.delay=function(t,e){var r=c.call(arguments,2);return setTimeout(function(){return t.apply(null,r)},e)},E.defer=function(t){return E.delay.apply(E,[t,1].concat(c.call(arguments,1)))},E.throttle=function(t,e,r){var i,n,s,o=null,a=0;r||(r={});var u=function(){a=r.leading===!1?0:new Date,o=null,s=t.apply(i,n)};return function(){var l=new Date;a||r.leading!==!1||(a=l);var f=e-(l-a);return i=this,n=arguments,0>=f?(clearTimeout(o),o=null,a=l,s=t.apply(i,n)):o||r.trailing===!1||(o=setTimeout(u,f)),s}},E.debounce=function(t,e,r){var i,n,s,o,a;return function(){s=this,n=arguments,o=new Date;var u=function(){var l=new Date-o;e>l?i=setTimeout(u,e-l):(i=null,r||(a=t.apply(s,n)))},l=r&&!i;return i||(i=setTimeout(u,e)),l&&(a=t.apply(s,n)),a}},E.once=function(t){var e=!1,r;return function(){return e?r:(e=!0,r=t.apply(this,arguments),t=null,r)}},E.wrap=function(t,e){return function(){var r=[t];return f.apply(r,arguments),e.apply(this,r)}},E.compose=function(){var t=arguments;return function(){for(var e=arguments,r=t.length-1;r>=0;r--)e=[t[r].apply(this,e)];return e[0]}},E.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},E.keys=S||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var r in t)E.has(t,r)&&e.push(r);return e},E.values=function(t){for(var e=E.keys(t),r=e.length,i=new Array(r),n=0;r>n;n++)i[n]=t[e[n]];return i},E.pairs=function(t){for(var e=E.keys(t),r=e.length,i=new Array(r),n=0;r>n;n++)i[n]=[e[n],t[e[n]]];return i},E.invert=function(t){for(var e={},r=E.keys(t),i=0,n=r.length;n>i;i++)e[t[r[i]]]=r[i];return e},E.functions=E.methods=function(t){var e=[];for(var r in t)E.isFunction(t[r])&&e.push(r);return e.sort()},E.extend=function(t){return C(c.call(arguments,1),function(e){if(e)for(var r in e)t[r]=e[r]}),t},E.pick=function(t){var e={},r=p.apply(s,c.call(arguments,1));return C(r,function(r){r in t&&(e[r]=t[r])}),e},E.omit=function(t){var e={},r=p.apply(s,c.call(arguments,1));for(var i in t)E.contains(r,i)||(e[i]=t[i]);return e},E.defaults=function(t){return C(c.call(arguments,1),function(e){if(e)for(var r in e)void 0===t[r]&&(t[r]=e[r])}),t},E.clone=function(t){return E.isObject(t)?E.isArray(t)?t.slice():E.extend({},t):t},E.tap=function(t,e){return e(t),t};var q=function(t,e,r,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof E&&(t=t._wrapped),e instanceof E&&(e=e._wrapped);var n=d.call(t);if(n!=d.call(e))return!1;switch(n){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=r.length;s--;)if(r[s]==t)return i[s]==e;var o=t.constructor,a=e.constructor;if(o!==a&&!(E.isFunction(o)&&o instanceof o&&E.isFunction(a)&&a instanceof a))return!1;r.push(t),i.push(e);var u=0,l=!0;if("[object Array]"==n){if(u=t.length,l=u==e.length)for(;u--&&(l=q(t[u],e[u],r,i)););}else{for(var f in t)if(E.has(t,f)&&(u++,!(l=E.has(e,f)&&q(t[f],e[f],r,i))))break;if(l){for(f in e)if(E.has(e,f)&&!u--)break;l=!u}}return r.pop(),i.pop(),l};E.isEqual=function(t,e){return q(t,e,[],[])},E.isEmpty=function(t){if(null==t)return!0;if(E.isArray(t)||E.isString(t))return 0===t.length;for(var e in t)if(E.has(t,e))return!1;return!0},E.isElement=function(t){return!(!t||1!==t.nodeType)},E.isArray=T||function(t){return"[object Array]"==d.call(t)},E.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(t){E["is"+t]=function(e){return d.call(e)=="[object "+t+"]"}}),E.isArguments(arguments)||(E.isArguments=function(t){return!(!t||!E.has(t,"callee"))}),"function"!=typeof/./&&(E.isFunction=function(t){return"function"==typeof t}),E.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},E.isNaN=function(t){return E.isNumber(t)&&t!=+t},E.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==d.call(t)},E.isNull=function(t){return null===t},E.isUndefined=function(t){return void 0===t},E.has=function(t,e){return h.call(t,e)},E.noConflict=function(){return r._=i,this},E.identity=function(t){return t},E.times=function(t,e,r){for(var i=Array(Math.max(0,t)),n=0;t>n;n++)i[n]=e.call(r,n);return i},E.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var R={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};R.unescape=E.invert(R.escape);var F={escape:new RegExp("["+E.keys(R.escape).join("")+"]","g"),unescape:new RegExp("("+E.keys(R.unescape).join("|")+")","g")};E.each(["escape","unescape"],function(t){E[t]=function(e){return null==e?"":(""+e).replace(F[t],function(e){return R[t][e]})}}),E.result=function(t,e){if(null!=t){var r=t[e];return E.isFunction(r)?r.call(t):r}},E.mixin=function(t){C(E.functions(t),function(e){var r=E[e]=t[e];E.prototype[e]=function(){var t=[this._wrapped];return f.apply(t,arguments),N.call(this,r.apply(E,t))}})};var L=0;E.uniqueId=function(t){var e=++L+"";return t?t+e:e},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;E.template=function(t,e,r){var i;r=E.defaults({},r,E.templateSettings);var n=new RegExp([(r.escape||z).source,(r.interpolate||z).source,(r.evaluate||z).source].join("|")+"|$","g"),s=0,o="__p+='";t.replace(n,function(e,r,i,n,a){return o+=t.slice(s,a).replace(D,function(t){return"\\"+U[t]}),r&&(o+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),n&&(o+="';\n"+n+"\n__p+='"),s=a+e.length,e}),o+="';\n",r.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=new Function(r.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(e)return i(e,E);var u=function(t){return i.call(this,t,E)};return u.source="function("+(r.variable||"obj")+"){\n"+o+"}",u},E.chain=function(t){return E(t).chain()};var N=function(t){return this._chain?E(t).chain():t};E.mixin(E),C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=s[t];E.prototype[t]=function(){var r=this._wrapped;return e.apply(r,arguments),"shift"!=t&&"splice"!=t||0!==r.length||delete r[0],N.call(this,r)}}),C(["concat","join","slice"],function(t){var e=s[t];E.prototype[t]=function(){return N.call(this,e.apply(this._wrapped,arguments))}}),E.extend(E.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof sumo.define&&sumo.define.amd&&sumo.define("underscore",[],function(){return E})}.call(this),sumo.define("underscore-lib",function(){}),sumo.define("underscore",["underscore-lib"],function(t){return t.noConflict()}),sumo.define("color",[],function(){var t={lightOrDark:function(t){var e,r,i,n;return t.toHex&&(t="#"+t.toHex()),t.match(/^rgb/)?(t=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/),e=t[1],i=t[2],r=t[3]):(t=+("0x"+t.slice(1).replace(t.length<5&&/./g,"$&$&")),e=t>>16,i=t>>8&255,r=255&t),n=Math.sqrt(.299*(e*e)+.587*(i*i)+.114*(r*r)),n>127.5?"light":"dark"},whiteOrBlack:function(t){return"light"==this.lightOrDark(t)?"black":"white"},shadeColor:function(t,e){t=t.toString();var r=parseInt(t.slice(1),16),i=Math.round(2.55*e),n=(r>>16)+i,s=(r>>8&255)+i,o=(255&r)+i;return"#"+(16777216+65536*(255>n?1>n?0:n:255)+256*(255>s?1>s?0:s:255)+(255>o?1>o?0:o:255)).toString(16).slice(1)},RGBColor:function(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),255]}},{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseInt(t[4])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),255]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),255]}}],r=0;r<e.length;r++){var i=e[r].re,n=e[r].process,s=i.exec(t);s&&(channels=n(s),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.a=channels[3],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.a=this.a<0||isNaN(this.a)?0:this.a>255?255:this.a,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),r=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==r.length&&(r="0"+r),"#"+t+e+r}},hexToRGBA:function(t,e){var r=new this.RGBColor(t);return r.a=e||1,r.toRGBA()}};return t}),sumo.define("jquery.article",["jquery"],function(t){t.expr[":"].emptytext=t.expr.createPseudo(function(e){return function(e){return""===t.trim(t(e).text())}}),t.fn.findIncludeSelf=function(e,r){var i;return i=":has(> p + p + p)"==e?this.find("p + p + p").parent():this.find(e),t(this).is(r)?i:i.addBack(e)},t.fn.exists=function(){return 0!==this.length},t.fn.findLeaves=function(r,i){var n=t(this),s=n.findIncludeSelf(r,"body").filter(i);return s=s.filter(e),s.filter(function(){return!t(this).find(s).exists()})},t.fn.findTrunks=function(r,i){var n=t(this),s=n.findIncludeSelf(r,"body").filter(i);return s=s.filter(e),s.filter(function(){return!t(this).parents().filter(s).exists()})};var e=function(){if(this._header||(this._header=i(t(this))),this._titleText||(this._titleText=o(this)),this._header){var e=.666*t(this).outerHeight();if(e&&this._header.outerHeight()>=e)return!1}return!0},r=function(e){var r=e||t("body").find("main, [role=main]").eq(0).get(0)||"body",i=t(),n=':not("[class^=comment],[id^=comment],[class*=footer],.sidebar:not(body) *,aside *,#sidebar *,footer *,[class*=footer]:not(body, [class*=not-footer]) *,#comments *,#livefyre-comments *,[class^=fyre] *,[class^=comment],[id^=comment] *,[class*=related-post]:not(body) *,.archive-page,.aside,.hentry-metro,.hrf-entry,:emptytext,.tve-leads-lightbox article")',s=[];s.push("article"),s.push(".post"),s.push(".entry-content"),s.push(".post-content"),s.push(".post_box"),s.push(".post-item"),s.push(".blog-post-wrapper"),s.push(".type-post"),s.push("#content"),s.push(".blog_content"),"body"!=r?(s.push(".hentry"),s.push(".content")):(s.push("main .hentry"),s.push("[role=main] .hentry"),s.push("main .content"),s.push("[role=main] .content")),s.push("#post-content"),s.push("#blog-content"),s.push(".blog-post");for(var o=[":has(> p + p + p)"],a=0;a<s.length;a++)if(i=t(r).findLeaves(s[a],n),i.length>0)return i;for(var a=0;a<o.length;a++)if(i=t(r).findTrunks(o[a],n),i.length>0)return i;var i,u,l,f;return i},i=function(e){var r=null,i=[".main-title","header",".post-header",".post-title","h1","h2","h3","h4","h5","h6",".title",".headline"],n={};try{i.forEach(function(i){if(r=t(e).find(i),r.length>0)throw n})}catch(s){if(s===n)return r.eq(0);throw s}return null},n=function(e){var r=null,i=[".fyre","footer",".post-footer",".footer",".entry-footer",'[class^="comment"]:not(.post-meta-info *, [class^=comment-count], [class^=comments-link], [class^=comments-number], li)',".fb-comments","iframe[title=Disqus]","#disqus_thread"],n={};try{i.forEach(function(i){if(r=t(e).find(i),r.length>0)throw n})}catch(s){if(s===n)return r.eq(0).hasClass("fb-comments")&&r.eq(0).prev("h3 + p").length>0?r.eq(0).prev("h3 + p").prev("h3"):r.eq(0);throw s}return null},s=function(t){return i(t)},o=function(t){var e=null;return!t._title&&t._header&&(t._title=t._header),t._title&&(e=t._title.text().trim()),e},a=function(e){var r=null,i=["a[rel=bookmark]","h1 > a","h2 > a","h3 > a","header > a"],n={};try{i.forEach(function(i){if(r=t(e).find(i).filter("[href]"),r.length>0)throw n})}catch(s){if(s===n)return r.eq(0);throw s}return null};t.articles=function(e){if("__smCache"in window&&"articles"in window.__smCache)return window.__smCache.articles;var u=r(e);return u.each(function(){this._header||(this._header=i(t(this))),this._footer=n(t(this)),this._title=this._header?s(this._header):null,this._titleText||(this._titleText=o(this));var e=this._header?a(this._header):null;e?this._anchor=e:this._anchor=a(t(this)),this._anchor?this._url=this._anchor.attr("href"):this._url=null,this._url||(this._url=window.location.href)}),"__smDebug"in window&&window.__smDebug&&u.each(function(){t(this).css("background","rgba(0,0,255,.5)"),this._header&&this._header.css("background","rgba(0,255,0,.5)"),this._title&&this._title.css("background","rgba(255,0,0,.5)"),this._footer&&this._footer.css("background","rgba(255,255,0,.5)")}),"__smCache"in window||(window.__smCache={}),window.__smCache.articles=u,setTimeout(function(){"__smCache"in window&&delete window.__smCache.articles},1e4),u},t.article=function(){return t.articles().eq(0)}}),sumo.define("jquery.style",["jquery"],function(t){if(!t.fn.style){var e=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},r=!!CSSStyleDeclaration.prototype.getPropertyValue;r||(CSSStyleDeclaration.prototype.getPropertyValue=function(t){return this.getAttribute(t)},CSSStyleDeclaration.prototype.setProperty=function(t,r,i){this.setAttribute(t,r);var i="undefined"!=typeof i?i:"";if(""!=i){var n=new RegExp(e(t)+"\\s*:\\s*"+e(r)+"(\\s*;)?","gmi");this.cssText=this.cssText.replace(n,t+": "+r+" !"+i+";")}},CSSStyleDeclaration.prototype.removeProperty=function(t){return this.removeAttribute(t)},CSSStyleDeclaration.prototype.getPropertyPriority=function(t){var r=new RegExp(e(t)+"\\s*:\\s*[^\\s]*\\s*!important(\\s*;)?","gmi");return r.test(this.cssText)?"important":""}),t.fn.style=function(t,e,r){var i=this.get(0);if("undefined"==typeof i)return this;var n=this.get(0).style;return"undefined"!=typeof t?"undefined"!=typeof e?(r="important"==r?r:"","important"!=r&&"important"==n.getPropertyPriority(t)&&n.removeProperty(t),n.setProperty(t,e,r),this):n.getPropertyValue(t):n}}}),sumo.define("insQ",[],function(){var t=function(){"use strict";function t(t,e){var i,n="insQ_"+o++,s=function(t){(t.animationName===n||t[u]===n)&&(r(t.target)||e(t.target))};i=document.createElement("style"),i.innerHTML="@"+l+"keyframes "+n+" {  from {  outline: 1px solid transparent  } to {  outline: 0px solid transparent }  }\n"+t+" { animation-duration: 0.001s; animation-name: "+n+"; "+l+"animation-duration: 0.001s; "+l+"animation-name: "+n+";  } ",document.head.appendChild(i);var a=setTimeout(function(){document.addEventListener("animationstart",s,!1),document.addEventListener("MSAnimationStart",s,!1),document.addEventListener("webkitAnimationStart",s,!1)},d.timeout);return{destroy:function(){clearTimeout(a),i&&(document.head.removeChild(i),i=null),document.removeEventListener("animationstart",s),document.removeEventListener("MSAnimationStart",s),document.removeEventListener("webkitAnimationStart",s)}}}function e(t){t.QinsQ=!0}function r(t){return d.strictlyNew&&t.QinsQ===!0}function i(t){var e=t.parentNode;return e?r(e)?t:i(e):t}function n(t){for(e(t),t=t.firstChild;t;t=t.nextSibling)void 0!==t&&1===t.nodeType&&n(t)}function s(s,o){var a=[],u=function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){a.forEach(n),o(a),a=[]},10)}}();return t(s,function(t){if(!r(t)){e(t);var n=i(t);a.indexOf(n)<0&&a.push(n),u()}})}var o=100,a=!1,u="animationName",l="",f="Webkit Moz O ms Khtml".split(" "),c="",p=document.createElement("div"),d={strictlyNew:!0,timeout:20};if(p.style.animationName&&(a=!0),a===!1)for(var h=0;h<f.length;h++)if(void 0!==p.style[f[h]+"AnimationName"]){c=f[h],u=c+"AnimationName",l="-"+c.toLowerCase()+"-",a=!0;break}var m=function(e){return a&&e.match(/[^{}]/)?(d.strictlyNew&&n(document.body),{every:function(r){return t(e,r)},summary:function(t){return s(e,t)}}):!1};return m.config=function(t){for(var e in t)t.hasOwnProperty(e)&&(d[e]=t[e])},m}();return t}),sumo.define("debounce",["jquery"],function(t){"$:nomunge";var e;t.throttle=e=function(e,r,i,n){function s(){function t(){a=+new Date,i.apply(u,f)}function s(){o=void 0}var u=this,l=+new Date-a,f=arguments;n&&!o&&t(),o&&clearTimeout(o),void 0===n&&l>e?t():r!==!0&&(o=setTimeout(n?s:t,void 0===n?e-l:e))}var o,a=0;return"boolean"!=typeof r&&(n=i,i=r,r=void 0),t.guid&&(s.guid=i.guid=i.guid||t.guid++),s},t.debounce=function(t,r,i){return void 0===i?e(t,r,!1):e(t,i,r!==!1)}}),sumo.define("jquery.styleBuffer",["jquery","insQ","jquery.style","debounce"],function(t,e){t.expr[":"].notonpage=t.expr.createPseudo(function(e){return function(e){if("hidden"==t(e).css("visibility")||0==t(e).css("opacity")||"none"==t(e).css("display")||t(e).position().top>=t(window).height()||t(e).position().right<=0||t(e).position().left>=t(window).width()||t(e).position().left<=-t(e).width()||t(e).position().bottom<=0)return!0;var r=t(e).parent();return r?r.is(":notonpage"):!1}}),t.fn.removeStyleBuffer=function(e,r){var i=this;return i.each(function(){var i=t(this).data(e+"-buffer-"+r),n=t(this).data(e+"-buffer-"+r+"-priority");t(this).style(e+"-"+r,void 0==i?"":i,void 0==n?"":n)}),t.each(t.fn.styleBuffer._groups,function(t,e){e.elements=e.elements.not(i)}),this},t.fn.styleBufferPage=function(e){var e=e||t("*"),r=t("[data-sumome-stylebuffer-page]"),i=r.length*t(window).height();return r.length>0?($fixed=e.not(r).not("body, html").filter(function(){if(t(this).is("[data-sumome-stylebuffer-page-fixed], #sumome-modal-mask, .sumome-control, .sumome-dialog-popup, .sumome-dialog-popup-overlay, .sumome-blockui, .sumome-block-overlay, .sumome-sp-container"))return!1;var e=t(this).css("position");if("fixed"===e)return!0;if("absolute"!==e)return!1;var r=t(this).parents().filter(function(e,r){return!t(r).is("body,html")&&["relative","fixed","absolute"].indexOf(t(r).css("position"))>=0});if(!r||!r.length)return!0;if(t(this).parents("[data-sumome-stylebuffer-page]").length>0)return!1;if(!t(this).parent().is("body,html"))return!1;var n=t(this).position().top;return i>=n&&n>-2e3?!0:!1}),$fixed.each(function(){t(this).attr("data-sumome-stylebuffer-page-fixed",!0);for(var e=["","-webkit","-ms","-moz","-o"],r=0;r<e.length;r++){var i=e[r];t(this).data("sumome-stylebuffer-original"+i+"-transform",t(this).style(i+(i?"-":"")+"transform")),t(this).data("sumome-stylebuffer-original"+i+"-transform-priority",t(this).style().getPropertyPriority(i+(i?"-":"")+"transform")),t(this).data("sumome-stylebuffer-original"+i+"-transition-duration",t(this).style(i+(i?"-":"")+"transition-duration")),t(this).data("sumome-stylebuffer-original"+i+"-transition-duration-priority",t(this).style().getPropertyPriority(i+(i?"-":"")+"transition-duration")),t(this).data("sumome-stylebuffer-original"+i+"-animation-fill-mode",t(this).style(i+(i?"-":"")+"animation-fill-mode")),t(this).data("sumome-stylebuffer-original"+i+"-animation-fill-mode-priority",t(this).style().getPropertyPriority(i+(i?"-":"")+"animation-fill-mode")),t(this).data("sumome-stylebuffer-original"+i+"-animation-duration",t(this).style(i+(i?"-":"")+"animation-duration")),t(this).data("sumome-stylebuffer-original"+i+"-animation-duration-priority",t(this).style().getPropertyPriority(i+(i?"-":"")+"animation-duration"))}for(var r=0;r<e.length;r++){var i=e[r];t(this).style(i+(i?"-":"")+"transition-duration","0s","important"),t(this).style(i+(i?"-":"")+"transform","scale(0,0)","important"),t(this).style(i+(i?"-":"")+"animation-fill-mode","none","important"),t(this).style(i+(i?"-":"")+"animation-duration","0s","important")}t(this).is("iframe")&&(t(this).data("sumome-stylebuffer-original-display",t(this).style("display")),t(this).data("sumome-stylebuffer-original-display-priority",t(this).style().getPropertyPriority("display")),t(this).style("display","none","important"))})):t("[data-sumome-stylebuffer-page-fixed]").each(function(){for(var e=["","-webkit","-ms","-moz","-o"],r=0;r<e.length;r++){var i=e[r];t(this).style(i+(i?"-":"")+"transform",t(this).data("sumome-stylebuffer-original"+i+"-transform"),t(this).data("sumome-stylebuffer-original"+i+"-transform-priority")),t(this).style(i+(i?"-":"")+"transition-duration",t(this).data("sumome-stylebuffer-original"+i+"-transition-duration"),t(this).data("sumome-stylebuffer-original"+i+"-transition-duration-priority")),t(this).style(i+(i?"-":"")+"animation-fill-mode",t(this).data("sumome-stylebuffer-original"+i+"-animation-fill-mode"),t(this).data("sumome-stylebuffer-original"+i+"-animation-fill-mode-priority")),t(this).style(i+(i?"-":"")+"animation-duration",t(this).data("sumome-stylebuffer-original"+i+"-animation-duration"),t(this).data("sumome-stylebuffer-original"+i+"-animation-duration-priority"))}t(this).is("iframe")&&t(this).style("display",t(this).data("sumome-stylebuffer-original-display"),t(this).data("sumome-stylebuffer-original-display-priority")),t(this).removeAttr("data-sumome-stylebuffer-page-fixed")}),r},t.fn.styleBufferTop=function(e){e?t.fn.styleBufferTop._debounceInit(e):t.fn.styleBufferTop._init(e)},t.fn.styleBufferTop._init=function(e){function r(){var e=document.getElementById("sumome-smartbar-popup");if(e){var r=e.getBoundingClientRect(),i=r.height;r.bottom>0&&(i=r.height-r.bottom),t.fn.styleBufferTop.stackedElements.each(function(e,r){t(r).css("marginTop",t(r).data("sumome-stylebuffertop-original-margin")-i)}),t.fn.styleBufferTop.oldTopElements.each(function(e,r){t(r).css("position",t(r).data("sumome-stylebuffertop-original-position")),t(r).css("top",t(r).data("sumome-stylebuffertop-original-top")-i)})}}var i=t.fn.styleBufferPage(),n=i.length*t(window).height();if(e)var s=t("[data-sumome-stylebuffer-top]");else var s=t("[data-sumome-stylebuffer-top],[data-sumome-stylebuffer-top-stash]");var o=0;s.sort(function(e,r){return e=t(e).data("sumome-stylebuffer-top"),r=t(r).data("sumome-stylebuffer-top"),r>e?-1:e>r?1:0}),t.fn.styleBufferTop._groups=[];var a=t("body"),u=t("#sumome-smartbar-popup[data-sumome-stylebuffer-top]"),l=0,f=!1;if(t.fn.styleBufferTop.stackedElements=t(s).not("#sumome-smartbar-popup"),u&&u.data("sumome-smartbar-config")&&(l=u.outerHeight(),f=u.data("sumome-smartbar-config").show_type),t(s).each(function(e,r){t.fn.styleBuffer._apply(t(r),"margin","top",o,!0),t.fn.styleBufferTop._groups.push({elements:t(r),prop:"margin",side:"top",px:o,force:!0}),"undefined"==typeof t(r).data("sumome-stylebuffertop-original-margin")&&t(r).data("sumome-stylebuffertop-original-margin",o),o+=t(r).height()}),"undefined"==typeof a.data("sumome-stylebuffertop-original-margintop")?("undefined"==typeof a.data("sumome-welcomemat-original-padding-top")?a.data("sumome-stylebuffertop-original-paddingtop",parseInt(a.css("paddingTop"))):a.data("sumome-stylebuffertop-original-paddingtop",parseInt(a.data("sumome-welcomemat-original-padding-top"))),a.data("sumome-stylebuffertop-original-margintop",parseInt(a.css("marginTop")))):(a.css("marginTop",a.data("sumome-stylebuffertop-original-margintop")),a.css("paddingTop",a.data("sumome-stylebuffertop-original-paddingtop")+"px !important")),t.fn.styleBufferTop.oldTopElements&&t.fn.styleBufferTop.oldTopElements.length&&t.fn.styleBufferTop.oldTopElements.each(function(e,r){if(t(r).data("sumome-stylebuffertop-original-offset")){var i=t(r).data("sumome-stylebuffertop-has-inline").top,n=t(r).data("sumome-stylebuffertop-has-inline").bottom,s=t(r).data("sumome-stylebuffertop-has-inline").left,o=t(r).data("sumome-stylebuffertop-has-inline").right,a=t(r).data("sumome-stylebuffertop-has-inline").position,u=t(r).style("right"),l=t(r).position().right,f=t(r).data("sumome-stylebuffertop-original-offset").right,c=t(r).style("left"),p=t(r).position().left,d=t(r).data("sumome-stylebuffertop-original-offset").left;t(r).style("top",t(r).data("sumome-stylebuffertop-original-offset").top),t(r).style("bottom",t(r).data("sumome-stylebuffertop-original-offset").bottom),u!==f&&l>0&&t(r).style("right",f),parseInt(d)>-2e3&&c!==d&&p<t(window).width()&&t(r).style("left",d),i||(t(r)[0].style.top=""),o||(t(r)[0].style.right=""),s||(t(r)[0].style.left=""),n||(t(r)[0].style.bottom=""),a||(t(r)[0].style.position="")}else t(r).style("top","0px")}),!e){t.fn.styleBufferTop.classFixedElements===!1&&(t.fn.styleBufferTop.classFixedElements=t(".fixed").not(s).length);var c=[".sumome-control",".sumome-dialog-popup",".sumome-dialog-popup-overlay",".sumome-image-sharer",".sumome-contactform-left-page-hidden",".sumome-contactform-right-page-hidden"];t.fn.styleBufferTop.oldTopElements=t("*").not(s).not(i).filter(function(e,r){var i=["absolute","fixed"].indexOf(t(r).css("position"))>=0&&t(r).position().top<o&&t(r).position().top>-2e3&&t(r).height()+t(r).position().top>0&&"sumome-modal-mask"!=t(r).attr("id")&&!t(r).is(c.join(","));if(i&&"undefined"==typeof t(r).data("sumome-stylebuffertop-original-position")){t(r).data("sumome-stylebuffertop-original-position",t(r).css("position"));var n={top:""!==t(r)[0].style.top,left:""!==t(r)[0].style.left,right:""!==t(r)[0].style.right,bottom:""!==t(r)[0].style.bottom,position:""!==t(r)[0].style.position},s={top:t(r).css("top"),left:t(r).css("left"),bottom:t(r).css("bottom"),right:t(r).css("right")};"auto"!=s.bottom&&parseFloat(s.bottom)>0&&(s.bottom=parseFloat(s.bottom)-o+"px"),t(r).data("sumome-stylebuffertop-original-offset",s),t(r).data("sumome-stylebuffertop-has-inline",n)}return i}),t.fn.styleBufferTop.oldTopElements=t.fn.styleBufferTop.oldTopElements.filter(function(e,r){if("fixed"==t(r).css("position"))return!0;var i=t(r).parents().filter(function(e,r){return!t(r).is("body,html")&&["relative","fixed","absolute"].indexOf(t(r).css("position"))>=0});return!(i&&i.length)}),t.fn.styleBufferTop.bumpDownElements=t.fn.styleBufferTop.oldTopElements.filter(function(e,r){var i=!1;return"fixed"==t(r).css("position")?!0:(t(r).parents().each(function(e,r){return!t(r).is("body,html")&&["relative","absolute"].indexOf(t(r).css("position"))>=0?(i=!0,!1):void 0}),!i)}),t.fn.styleBufferTop.changePositionElements=t.fn.styleBufferTop.bumpDownElements.filter(function(e,r){var i=!1;return"fixed"==t(r).css("position")?(t(r).parents().each(function(e,r){return!t(r).is("body,html")&&["relative","absolute","fixed"].indexOf(t(r).css("position"))>=0?(i=!0,!1):void 0}),i&&t(r).data("sumome-stylebuffertop-offset",{top:t(r).offset().top-t(window).scrollTop(),left:t(r).offset().left-t(window).scrollLeft()}),i):!1})}"smart"==f&&(t.fn.styleBufferTop.oldTopElements.addClass("sumome-smartbar-fixedTopSmart"),t(s).not("#sumome-smartbar-popup").style("transition","margin-top .2s ease-in-out"),a.style("transition","margin-top .2s ease-in-out")),"static"==f?(t.fn.styleBufferTop.bumpDownElements&&t.fn.styleBufferTop.bumpDownElements.length&&(t.fn.styleBufferTop.bumpDownElements.each(function(e,r){var i=!1;if(t.inArray(r,t.fn.styleBufferTop.changePositionElements)>=0){i=!0;var n=t(r).offset()}t(r).style("position","absolute"),i?(t(r).data("sumome-smartbar-new-offset",{top:l+n.top-t(r).offset().top,left:n.left-t(r).offset().left}),t(r).style("top",t(r).data("sumome-smartbar-new-offset").top+"px"),t(r).data("sumome-smartbar-new-offset").left!==parseInt(t(r).data("sumome-stylebuffertop-original-offset").left)&&parseInt(t(r).data("sumome-stylebuffertop-original-offset").left)>t(window).width()&&t(r).style("left",t(r).data("sumome-smartbar-new-offset").left+"px")):t(r).style("top",o+"px"),t(r).data("sumome-stylebuffertop-original-top",o)}),t.fn.styleBufferTop.oldTopElements.each(function(e,r){t(r).css("position",t(r).data("sumome-stylebuffertop-original-position"))})),t(window).scroll(r),r()):(t.fn.styleBufferTop.oldTopElements&&t.fn.styleBufferTop.oldTopElements.length&&t.fn.styleBufferTop.oldTopElements.each(function(e,r){t(r).data("sumome-stylebuffertop-original-offset")&&("auto"==t(r).data("sumome-stylebuffertop-original-offset").top||t(r).style("top",o+parseFloat(t(r).data("sumome-stylebuffertop-original-offset").top)+"px"))}),"fixed"==f&&t(window).scroll(function(){var e=60,r=t(window).scrollTop();t.fn.styleBufferTop.classFixedElements!==t.fn.styleBufferTop.classFixedElementsScroll&&(r>=e&&t.fn.styleBufferTop.classFixedElementsScroll===!1?t.fn.styleBufferTop.classFixedElementsScroll=t(".fixed").not(s).length:r>=e&&!t.fn.styleBufferTop.checkScrollDown?(t.fn.styleBufferTop.checkScrollDown=!0,t.fn.styleBufferTop.checkScrollUp=!1,t("body").styleBufferTop()):e>r&&!t.fn.styleBufferTop.checkScrollUp&&(t.fn.styleBufferTop.checkScrollDown=!1,t.fn.styleBufferTop.checkScrollUp=!0,t("body").styleBufferTop()));
}));var u=t("#sumome-smartbar-popup");if(u&&u.data("sumome-smartbar-config")&&"smart"==u.data("sumome-smartbar-config").show_type&&(o=0,t("[data-sumome-stylebuffer-top],[data-sumome-stylebuffer-top-stash]").each(function(){o+=t(this).outerHeight()})),t.fn.styleBufferTop.totalOffset=o,o+=a.data("sumome-stylebuffertop-original-paddingtop")+a.data("sumome-stylebuffertop-original-margintop"),o+n!==0?(t.fn.styleBuffer._apply(a,"padding","top",o+n,!0,"important"),t.fn.styleBuffer._apply(a,"margin","top",0,!0,"important"),t.fn.styleBufferTop._groups.push({elements:a,prop:"padding",side:"top",px:o+n,force:!0,priority:"important"}),t.fn.styleBufferTop._groups.push({elements:a,prop:"margin",side:"top",px:0,force:!0,priority:"important"})):(a.removeStyleBuffer("padding","top"),a.removeStyleBuffer("margin","top")),("bugfix"==a.css("-webkit-animation-name")||"androidbugfix"==a.css("-webkit-animation-name"))&&(t("[data-sumome-stylebuffertop-bugfix]").length&&t("[data-sumome-stylebuffertop-bugfix]").remove(),a.append("<style data-sumome-stylebuffertop-bugfix>@-webkit-keyframes sumome-bugfix { from { fill: 0; } to { fill: 0; } }</style>"),a.css("-webkit-animation","sumome-bugfix infinite 1s")),"undefined"==typeof a.data("sumome-stylebuffertop-original-bgposition")&&(a.data("sumome-stylebuffertop-original-bgposition",a.css("backgroundPosition")),a.data("sumome-stylebuffertop-original-bgpositiony",a.css("backgroundPositionY")),a.data("sumome-stylebuffertop-original-bgrepeat",a.css("backgroundRepeat"))),("50% 0%"==a.data("sumome-stylebuffertop-original-bgposition")&&"no-repeat"==a.data("sumome-stylebuffertop-original-bgrepeat")||"0% 0%"==a.data("sumome-stylebuffertop-original-bgposition")&&"repeat-x"==a.data("sumome-stylebuffertop-original-bgrepeat"))&&a.css("backgroundPositionY",o),/^50% [0-9]+px, 0% [0-9]+px$/.test(a.data("sumome-stylebuffertop-original-bgposition"))&&/^no-repeat/.test(a.data("sumome-stylebuffertop-original-bgrepeat"))){var p=a.data("sumome-stylebuffertop-original-bgpositiony").split(", ");a.css("backgroundPositionY",parseInt(p[0])+o+"px, "+(parseInt(p[1])+o)+"px")}return this},t.fn.styleBufferTop._debounceInit=t.debounce(150,!0,function(e){t.fn.styleBufferTop._init(e)}),t.fn.styleBufferBottom=function(e){e?t.fn.styleBufferBottom._debounceInit(e):t.fn.styleBufferBottom._init(e)},t.fn.styleBufferBottom._init=function(e){var r=t("[data-sumome-stylebuffer-page]");if(e)var i=t("[data-sumome-stylebuffer-bottom]");else var i=t("[data-sumome-stylebuffer-bottom],[data-sumome-stylebuffer-bottom-stash]");var n=0;i.sort(function(e,r){return e=t(e).data("sumome-stylebuffer-bottom"),r=t(r).data("sumome-stylebuffer-bottom"),r>e?-1:e>r?1:0}),t.fn.styleBufferBottom._groups=[];var s=t("body"),o=t("#sumome-smartbar-popup[data-sumome-stylebuffer-bottom]"),a=0,u=!1;if(t.fn.styleBufferBottom.stackedElements=t(i).not("#sumome-smartbar-popup"),o&&o.data("sumome-smartbar-config")&&(a=o.outerHeight(),u=o.data("sumome-smartbar-config").show_type),t(i).each(function(e,r){t(r).data("sumome-stylebufferbottom-offsety")&&(n+=t(r).data("sumome-stylebufferbottom-offsety")),t.fn.styleBuffer._apply(t(r),"top","top","auto",!0),t.fn.styleBuffer._apply(t(r),"bottom","bottom",n,!0),t.fn.styleBufferBottom._groups.push({elements:t(r),prop:"top",side:"top",px:"auto",force:!0}),t.fn.styleBufferBottom._groups.push({elements:t(r),prop:"bottom",side:"bottom",px:n,force:!0}),"undefined"==typeof t(r).data("sumome-stylebufferbottom-original-bottom")&&t(r).data("sumome-stylebufferbottom-original-bottom",n),n+=t(r).height()}),"undefined"==typeof s.data("sumome-stylebufferbottom-original-marginbottom")?(s.data("sumome-stylebufferbottom-original-marginbottom",parseInt(s.css("marginBottom"))),s.data("sumome-stylebufferbottom-original-paddingbottom",parseInt(s.css("paddingBottom")))):(s.css("marginBottom",s.data("sumome-stylebufferbottom-original-marginbottom")),s.css("paddingBottom",s.data("sumome-stylebufferbottom-original-paddingbottom"))),t.fn.styleBufferBottom.oldBottomElements&&t.fn.styleBufferBottom.oldBottomElements.length&&t.fn.styleBufferBottom.oldBottomElements.each(function(e,r){if(t(r).data("sumome-stylebufferbottom-original-offset")){var i=t(r).data("sumome-stylebufferbottom-has-inline").top,n=t(r).data("sumome-stylebufferbottom-has-inline").bottom,s=t(r).data("sumome-stylebufferbottom-has-inline").left,o=t(r).data("sumome-stylebufferbottom-has-inline").right,a=t(r).data("sumome-stylebufferbottom-has-inline").position;t(r).style("position",t(r).data("sumome-stylebufferbottom-original-position")),t(r).style("top",t(r).data("sumome-stylebufferbottom-original-offset").top),t(r).style("bottom",t(r).data("sumome-stylebufferbottom-original-offset").bottom),t(r).style("left",t(r).data("sumome-stylebufferbottom-original-offset").left),t(r).style("right",t(r).data("sumome-stylebufferbottom-original-offset").right),i||(t(r)[0].style.top=""),o||(t(r)[0].style.right=""),s||(t(r)[0].style.left=""),n||(t(r)[0].style.bottom=""),a||(t(r)[0].style.position="")}else t(r).style("bottom","0px")}),!e){var l=["#sumome-modal-mask",".sumome-control",".sumome-dialog-popup",".sumome-dialog-popup-overlay"];t.fn.styleBufferBottom.oldBottomElements=t("*").not(i).not(r).filter(function(e,r){var i=["absolute","fixed"].indexOf(t(r).css("position"))>=0&&parseInt(t(r).css("bottom"))<n&&!t(r).is(l.join(","));return i&&"undefined"==typeof t(r).data("sumome-stylebufferbottom-original-position")&&(t(r).data("sumome-stylebufferbottom-original-position",t(r).css("position")),t(r).data("sumome-stylebufferbottom-original-offset",{top:t(r).css("top"),left:t(r).css("left"),bottom:t(r).css("bottom"),right:t(r).css("right")}),t(r).data("sumome-stylebufferbottom-has-inline",{top:""!==t(r)[0].style.top,left:""!==t(r)[0].style.left,right:""!==t(r)[0].style.right,bottom:""!==t(r)[0].style.bottom,position:""!==t(r)[0].style.position})),i});var f=t(window).height();t.fn.styleBufferBottom.oldBottomElements=t.fn.styleBufferBottom.oldBottomElements.filter(function(e,r){if(t(r).height()>=f)return!1;if("fixed"==t(r).css("position"))return!t(r).is(":notonpage");var i=t(r).parents().filter(function(e,r){return!t(r).is("body,html")&&["relative","fixed","absolute"].indexOf(t(r).css("position"))>=0});return!(i&&i.length)})}"smart"==u&&t(i).not("#sumome-smartbar-popup").style("transition","bottom .2s ease-in-out"),t.fn.styleBufferBottom.oldBottomElements&&t.fn.styleBufferBottom.oldBottomElements.length&&t.fn.styleBufferBottom.oldBottomElements.each(function(e,r){t(r).style("bottom",n+parseFloat(t(r).data("sumome-stylebufferbottom-original-offset").bottom)+"px"),n+=0===n||"fixed"===t(r).style("position")?0:t(r).height()}),t.fn.styleBufferBottom.totalOffset=n,n+=s.data("sumome-stylebufferbottom-original-paddingbottom")+s.data("sumome-stylebufferbottom-original-marginbottom"),t(".sumome-stylebufferbottom-shim").length||t('<div class="sumome-stylebufferbottom-shim" />').appendTo(s);var c=t(".sumome-stylebufferbottom-shim");return c.height(n),this},t.fn.styleBufferBottom._debounceInit=t.debounce(150,!0,function(e){t.fn.styleBufferBottom._init(e)}),t.fn.styleBuffer=function(e,r,i){return this.length<1?this:(t.fn.styleBuffer._groups.push({elements:this,prop:e,side:r,px:i,force:!1}),t.fn.styleBuffer._apply(this,e,r,i,!1),this)},t.fn.styleBuffer._apply=function(e,r,n,s,o,a){var u=t(e);return u.each(function(){var e=t(this);if(r==n)e.style(r,s+("auto"!=s?"px":""),void 0==a?"":a);else{var u=e.data(r+"-buffer-"+n),l=e.data(r+"-buffer-"+n+"-priority");if(void 0==u?(u=e.style(r+"-"+n),l=e.style().getPropertyPriority(r+"-"+n),e.data(r+"-buffer-"+n,void 0==u?"":u),e.data(r+"-buffer-"+n+"-priority",void 0==l?"":l)):t(this).style(r+"-"+n,u,void 0==l?"":l),o)e.style(r+"-"+n,s+"px",void 0==a?"":a);else{var f=i(e.css(r+"-"+n));e.style(r+"-"+n,Math.max(f,s)+"px",void 0==a?"":a)}}}),this},t.fn.styleBuffer.smartHide=function(e,r){if(!t.fn.styleBuffer.firedSmartHide){if(t.fn.styleBuffer.firedSmartHide=!0,t.fn.styleBuffer.firedSmartShow=!1,r)var i=t.fn.styleBufferTop,n=i.oldTopElements,s="sumome-stylebuffertop-original-margin",o="sumome-stylebuffertop-original-offset",a="sumome-stylebuffertop-original-position",u="top",l="marginTop";else{var i=t.fn.styleBufferBottom,n=i.oldBottomElements,s="sumome-stylebufferbottom-original-bottom",o="sumome-stylebufferbottom-original-offset",a="sumome-stylebufferbottom-original-position",u="bottom",l="bottom";t(".sumome-stylebufferbottom-shim").length&&t(".sumome-stylebufferbottom-shim").height("-="+e)}n&&n.length&&n.each(function(r,n){if(t(n).data(o)){if("fixed"==t(n).data(a))var s=i.totalOffset-e;else var s=e+parseFloat(t(n).data(o).top);t(n).style(u,s+"px")}else t(n).style(u,"0px")}),i.stackedElements&&i.stackedElements.length&&i.stackedElements.each(function(r,i){t(i).css(l,t(i).data(s)-e)})}},t.fn.styleBuffer.smartShow=function(e,r){if(!t.fn.styleBuffer.firedSmartShow){if(t.fn.styleBuffer.firedSmartHide=!1,t.fn.styleBuffer.firedSmartShow=!0,r)var i=t.fn.styleBufferTop,n=i.oldTopElements,s="sumome-stylebuffertop-original-margin",o="sumome-stylebuffertop-original-offset",a="top",u="marginTop";else{var i=t.fn.styleBufferBottom,n=i.oldBottomElements,s="sumome-stylebufferbottom-original-bottom",o="sumome-stylebufferbottom-original-offset",a="bottom",u="bottom";t(".sumome-stylebufferbottom-shim").length&&t(".sumome-stylebufferbottom-shim").height("+="+e)}n&&n.length&&n.each(function(r,n){t(n).data(o)?t(n).style(a,i.totalOffset+"px"):t(n).style(a,e+"px")}),i.stackedElements&&i.stackedElements.length&&i.stackedElements.each(function(e,r){t(r).css(u,t(r).data(s))})}},t.fn.styleBuffer._groups=[],t.fn.styleBuffer._throttle=80,t.fn.styleBuffer.firedSmartHide=!1,t.fn.styleBuffer.firedSmartShow=!1,t.fn.styleBufferTop._groups=[],t.fn.styleBufferTop.stackedElements=null,t.fn.styleBufferTop.oldTopElements=null,t.fn.styleBufferTop.bumpDownElements=null,t.fn.styleBufferTop.changePositionElements=null,t.fn.styleBufferTop.totalOffset=0,t.fn.styleBufferTop.checkedScrollDown=!1,t.fn.styleBufferTop.classFixedElements=!1,t.fn.styleBufferTop.classFixedElementsScroll=!1,t.fn.styleBufferTop.checkScrollDown=!1,t.fn.styleBufferTop.checkScrollUp=!0,t.fn.styleBufferBottom._groups=[],t.fn.styleBufferBottom.stackedElements=null,t.fn.styleBufferBottom.oldBottomElements=null,t.fn.styleBufferBottom.totalOffset=0;var r=-1;t.fn.styleBuffer._update=t.debounce(150,!0,function(e){if(e&&"resize"===e.type){var i=t(window).width();if(i===r)return;r=i}t.each(t.fn.styleBuffer._groups,function(){t.fn.styleBuffer._apply(this.elements,this.prop,this.side,this.px,this.force,this.priority)}),t.fn.styleBufferTop._groups.length&&(t("body").styleBufferTop(!0),t.each(t.fn.styleBufferTop._groups,function(){t.fn.styleBuffer._apply(this.elements,this.prop,this.side,this.px,this.force,this.priority)})),t.fn.styleBufferBottom._groups.length&&(t("body").styleBufferBottom(!0),t.each(t.fn.styleBufferBottom._groups,function(){t.fn.styleBuffer._apply(this.elements,this.prop,this.side,this.px,this.force,this.priority)})),t(window).trigger("resize.sumome-welcomemat")}),t(window).bind("load resize orientationchange",function(e){e&&"resize"==e.type&&e.target!=window||t.fn.styleBuffer._update(e)}),e.config({strictlyNew:!1}),e("#menufication-top").every(t.proxy(function(e){t("body").styleBufferTop()},this));var i=function(t){return parseFloat(t)||0}}),sumo.define("jquery.displayrules",["jquery","URI","jquery.article"],function(t,e){t.isCurrentUrlAllowed=function(r,i,n,s){function o(t,e,r,i){var n=[];if(t&&t.length)for(var s=0;s<t.length;s++){var o=t[s];if("object"==typeof o&&o.hasOwnProperty(e)&&o[e]==r&&(n.push(o),i))return n[0]}return i?null:n}if(r&&r.length){var a=o(r,"filter_type","article",!0),u=[];a&&(u=t.articles()),n||(n=!1);var l=function(t){for(var e=Object.keys(t),r=e.length,i=Array(r),n=0;r>n;n++)i[n]=[e[n],t[e[n]]];return i},f=function(t){var e=l(t),r=e.length;return function(t){if(null==t)return!r;t=new Object(t);for(var i=0;r>i;i++){var n=e[i],s=n[0];if(n[1]!==t[s]||!(s in t))return!1}return!0}},c=function(t){var t=t.substr(1).split("&");if(""==t)return{};for(var e={},r=0;r<t.length;++r){var i=t[r].split("=",2);if(1==i.length)e[i[0]]="";else try{e[i[0]]=decodeURIComponent(i[1].replace(/\+/g," "))}catch(n){e[i[0]]=i[1].replace(/\+/g," ")}}return e},p=function(t,e,r){if(t.has_hash&&t.hash!=e)return!1;if(t.has_query_params){var i=c(t.search),n=c(r),s=f(i);if(s(n))return!0;if(!(["containing","beginning"].indexOf(t.filter_type)>=0))return!1;for(var o=!0,a=Object.keys(i),u=0;u<a.length;u++){var l=a[u],p=i[a[u]];if(p&&p.length)if(l in n){if(0!=n[l].indexOf(p))return!1}else{if("containing"!=t.filter_type)return!1;var d=!1;if(Object.keys(n).forEach(function(t){t.lastIndexOf(l)>=0&&l==t.substring(t.lastIndexOf(l))&&0==n[t].indexOf(p)&&(d=!0)}),!d)return!1}else{if(l in n)continue;for(var h=Object.keys(n),d=!1,m=0;m<h.length;m++){var g=h[m];if(0==g.indexOf(l)){d=!0;break}}if(!d)return!1}}}return!0},d=o(r,"parsedUserAgent",!0,!0),h=window.location.toString();h&&(h=h.toLowerCase());var m=window.location.pathname.toString();m&&(m=m.toLowerCase());var g=window.location.hostname+m;g&&(g=g.toLowerCase()),"/"==m[m.length-1]&&(m=m.substring(0,m.length-1),g=g.substring(0,g.length-1)),0==g.indexOf("www.")&&(g=g.substring(4));var y=window.location.search;y&&(y=y.toLowerCase());var v=window.location.hash;v&&(v=v.toLowerCase(),"#"!=v[0]&&(v="#"+v));for(var b=c(y),_=Math.min(window.screen.availWidth||t(window).width(),t(window).width()),w=document.cookie.split(";"),x={},B=[],T=0;T<w.length;T++){var S=w[T].substring(0,w[T].indexOf("=")).trim(),A=w[T].substring(w[T].indexOf("=")+1).trim();B.push(S),x[S]=A}var E=document.getElementsByTagName("meta"),C=document.referrer;if(C&&C.length){C=C.toLowerCase();try{var O=e(C);if(O.is("ip")){var k=O.hostname();k&&(k=k.toLowerCase())}else{var k=O.domain();k&&(k=k.toLowerCase())}var I=O.path();I&&(I=I.toLowerCase());var P=O.tld();P&&(P=P.toLowerCase());var Q=O.hostname()?O.hostname().toLowerCase()+I:I;"/"==I[I.length-1]&&(I=I.substring(0,I.length-1),Q=Q.substring(0,Q.length-1)),0==Q.indexOf("www.")&&(Q=Q.substring(4));var j=O.search(),q=O.hash()}catch(R){C=!1}}else C=!1;var F=function(e){var r=!1;return t.each(e,function(t,e){var i=!1;return e.forEach(function(t){var e=!1;if(!i)if("article"==t.filter_type)1==u.length&&(e=!0);else if("smaller"==t.filter_type)(isNaN(parseFloat(t.filter_value))||_<parseFloat(t.filter_value))&&(e=!0);else if("bigger"==t.filter_type)(isNaN(parseFloat(t.filter_value))||_>=parseFloat(t.filter_value))&&(e=!0);else if("views_lt"==t.filter_type)(isNaN(t.pageviews)||s<t.pageviews)&&(e=!0);else if("views_eq"==t.filter_type)(isNaN(t.pageviews)||s==t.pageviews)&&(e=!0);else if("views_gt"==t.filter_type)(isNaN(t.pageviews)||s>t.pageviews)&&(e=!0);else if("countryis"==t.filter_type)n==t.filter_value.toLowerCase()&&(e=!0);else if("countryisnot"==t.filter_type)n&&n==t.filter_value.toLowerCase()||(e=!0);else if("c_exists"==t.filter_type)B.indexOf(t.filter_value)>=0&&(e=!0);else if("c_dne"==t.filter_type)B.indexOf(t.filter_value)<0&&(e=!0);else if("c_equals"==t.filter_type)B.indexOf(t.filter_value)>=0&&x[t.filter_value]==t.param_value&&(e=!0);else if("c_notequals"==t.filter_type)(B.indexOf(t.filter_value)<0||x[t.filter_value]!=t.param_value)&&(e=!0);else if("c_contains"==t.filter_type)B.indexOf(t.filter_value)>=0&&x[t.filter_value].indexOf(t.param_value)>=0&&(e=!0);else if("c_notcontains"==t.filter_type)(B.indexOf(t.filter_value)<0||x[t.filter_value].indexOf(t.param_value)<0)&&(e=!0);else if("mt_equals"===t.filter_type)for(var r=0;r<E.length;r++){var o=E[r].getAttribute(t.filter_value);o&&o.toLowerCase()===t.param_value&&(e=!0)}else if("mt_notequals"===t.filter_type){for(var a=!1,r=0;r<E.length;r++){var o=E[r].getAttribute(t.filter_value);o&&o.toLowerCase()===t.param_value&&(a=!0)}e=!a}else if("mt_contains"===t.filter_type)for(var r=0;r<E.length;r++){var o=E[r].getAttribute(t.filter_value);o&&-1!==o.toLowerCase().indexOf(t.param_value)&&(e=!0)}else if("mt_notcontains"===t.filter_type){for(var a=!1,r=0;r<E.length;r++){var o=E[r].getAttribute(t.filter_value);o&&-1!==o.toLowerCase().indexOf(t.param_value)&&(a=!0)}e=!a}else if("mt_beginning"===t.filter_type)for(var r=0;r<E.length;r++){var o=E[r].getAttribute(t.filter_value);o&&o.toLowerCase().substring(0,t.param_value.length)===t.param_value&&(e=!0)}else if("q_exists"==t.filter_type)b&&b.hasOwnProperty(t.filter_value.toLowerCase())&&(e=!0);else if("q_dne"==t.filter_type)b&&b.hasOwnProperty(t.filter_value)||(e=!0);else if("q_equals"==t.filter_type)b&&b[t.filter_value]&&b[t.filter_value]==t.param_value&&(e=!0);else if("q_notequals"==t.filter_type)b&&b[t.filter_value]&&b[t.filter_value]==t.param_value||(e=!0);else if("q_contains"==t.filter_type)b&&b[t.filter_value]&&b[t.filter_value].indexOf(t.param_value)>=0&&(e=!0);else if("q_notcontains"==t.filter_type)(!b||!b[t.filter_value]||b[t.filter_value].indexOf(t.param_value)<0)&&(e=!0);else if("exact"==t.filter_type){var l=p(t,v,y);l&&(t.full_url?g==t.match_url&&(e=!0):null==t.match_url&&l?e=!0:(g==t.match_url||m==t.match_url)&&(e=!0))}else if("beginning"==t.filter_type){var l=p(t,v,y);l&&(t.full_url?0==g.indexOf(t.match_url.toLowerCase())&&(e=!0):null==t.match_url&&l?e=!0:(0==g.indexOf(t.match_url.toLowerCase())||0==m.indexOf(t.match_url.toLowerCase()))&&(e=!0))}else if("containing"==t.filter_type){var l=p(t,v,y);l&&(t.full_url?g.indexOf(t.match_url.toLowerCase())>=0&&(e=!0):null==t.match_url&&l?e=!0:g.indexOf(t.match_url.toLowerCase())>=0&&(e=!0))}else if(C&&["r_url_exact","r_domain_exact","r_url_beginning","r_domain_beginning","r_url_containing","r_domain_containing"].indexOf(t.filter_type)>=0)if("r_url_exact"==t.filter_type){var l=p(t,q,j);t.full_url?l&&Q==t.match_url.toLowerCase()&&(e=!0):l&&Q==t.match_url.toLowerCase()?e=!0:null==t.match_url&&l&&(e=!0)}else if("r_domain_exact"==t.filter_type)t.host?t.host==k&&(e=!0):t.filter_value==k&&(e=!0);else if("r_url_beginning"==t.filter_type){var l=p(t,q,j);t.full_url?l&&0==Q.indexOf(t.match_url)&&(e=!0):l&&0==Q.indexOf(t.match_url)?e=!0:null==t.match_url&&l&&(e=!0)}else if("r_domain_beginning"==t.filter_type)t.host&&0==k.indexOf(t.host)?e=!0:0==k.indexOf(t.filter_value)&&(e=!0);else if("r_url_containing"==t.filter_type){var l=p(t,q,j);t.full_url?l&&Q.indexOf(t.match_url)>=0&&(e=!0):l&&Q.indexOf(t.match_url)>=0?e=!0:null==t.match_url&&l&&(e=!0)}else"r_domain_containing"==t.filter_type&&(t.host&&k.indexOf(t.host)>=0?e=!0:k.indexOf(t.filter_value)>=0&&(e=!0));else if("ua_os"==t.filter_type&&d&&d.compareOS){var f=[t.filter_value];"winmobile"==t.filter_value?f=["windows mobile","windows phone"]:"macos"==t.filter_value?f=["mac os"]:"windesktop"==t.filter_value&&(f=["windows"]),f.indexOf(d.compareOS)>=0&&(e=!0)}else if("ua_browser"==t.filter_type&&d&&d.compareBrowser){var f=[t.filter_value];"chrome"==t.filter_value?f=["chrome","chromium"]:"ie"==t.filter_value?f=["ie","ie mobile"]:"opera"==t.filter_value?f=["opera","opera mini","opera mobile","opera tablet"]:"safari"==t.filter_value&&(f=["safari","mobile safari"]),f.indexOf(d.compareBrowser)>=0&&(e=!0)}else if("ua_exact"==t.filter_type)t.filter_value.toLowerCase()==navigator.userAgent.toLowerCase()&&(e=!0);else if("ua_beginning"==t.filter_type)0==navigator.userAgent.toLowerCase().indexOf(t.filter_value.toLowerCase())&&(e=!0);else if("ua_containing"==t.filter_type)navigator.userAgent.toLowerCase().indexOf(t.filter_value.toLowerCase())>=0&&(e=!0);else if("hash_exact"==t.filter_type){var c="#"==t.filter_value[0]?t.filter_value:"#"+t.filter_value;c.toLowerCase()==v.toLowerCase()&&(e=!0)}else if("hash_beginning"==t.filter_type){var c="#"==t.filter_value[0]?t.filter_value:"#"+t.filter_value;0==v.toLowerCase().indexOf(c.toLowerCase())&&(e=!0)}else if("hash_containing"==t.filter_type){var c="#"==t.filter_value[0]?t.filter_value:"#"+t.filter_value;v.toLowerCase().indexOf(c.toLowerCase())>=0&&(e=!0)}else"all"==t.filter_type&&(e=!0);e||(i=!0)}),i?void 0:(r=!0,!1)}),r},L=o(r,"rule_type","include",!1);if(L&&L.length){var z={},U=0;L.forEach(function(t){t.group_id&&t.group_id.length?z.hasOwnProperty(t.group_id)?z[t.group_id].push(t):z[t.group_id]=[t]:(z[U]=[t],U+=1)}),currentUrlIncluded=F(z)}else currentUrlIncluded=!0;if(!currentUrlIncluded)return!1;var D=o(r,"rule_type","exclude",!1),N=!1;if(!D||!D.length)return!0;var M={},U=0;return D.forEach(function(t){t.group_id&&t.group_id.length?M.hasOwnProperty(t.group_id)?M[t.group_id].push(t):M[t.group_id]=[t]:(M[U]=[t],U+=1)}),N=F(M),N?!1:!0}return!0}}),sumo.define("7df4df4a-9b26-4b6d-bdcf-d9475b2cfcc9/discover",["jquery","URI","underscore","color","jquery.article","jquery.style","jquery.styleBuffer","jquery.displayrules"],function(t,e,r,i){t.fn.unstatic=function s(){return t(this).addClass("sumome-article"),"static"==t(this).css("position")&&t(this).css("position","relative"),"content-box"==t(this).css("box-sizing")&&t(this).css("box-sizing","border-box"),this};var n={articlesFetched:!1,injectElement:null,isVertical:!1,gridColumns:4,gridRows:1,dataGridColumns:null,dataGridRows:null,initialize:function o(){this.api.on("7df4df4a-9b26-4b6d-bdcf-d9475b2cfcc9/service/reload",t.proxy(function(){this.load()},this)),this.load()},load:function a(){this.settings={articles:t.articles()},this.settings.articles.length>1&&(this.settings.articles=t([])),t.ajax({type:"POST",dataType:"json",url:this.api.properties.sumoUrl+"/apps/discover/load",data:{site_id:this.api.properties.siteId,pathname:location.pathname,geoLocation:this.api.properties.geoLocation,pageViews:this.api.properties.views,userAgent:navigator.userAgent},xhrFields:{withCredentials:!1},crossDomain:!0}).done(t.proxy(function(e){if(e&&"success"in e&&e.success){t.extend(this.settings,e);var r=Math.min(window.screen.availWidth||t(window).width(),t(window).width());this.settings.ctry=this.api.properties.geoLocation&&this.api.properties.geoLocation.ctry?this.api.properties.geoLocation.ctry:!1,this.settings.views=this.api.properties.views?this.api.properties.views:1,this.settings.reflink="https://sumome.com/?src=sm-dc-"+this.api.properties.siteId,t.isCurrentUrlAllowed(this.settings.display_rules,null,this.settings.ctry,this.settings.views)&&this.install()}},this))},install:function u(){setInterval(t.proxy(function(){this.bindDiscover()},this),500),this.bindDiscover()},bindDiscover:function l(){if(!this.articlesFetched){if("grid"==this.settings.display_mode)if(this.settings.grid_inject){if(!this.settings.articles.length)return}else{if(!t("[data-sumome-discover-grid]").length)return;this.injectElement=t("[data-sumome-discover-grid]").first()}this.articlesFetched=!0,this.injectElement&&(this.gridColumnsAttr=this.injectElement.attr("data-sumome-discover-grid-columns"),this.gridRowsAttr=this.injectElement.attr("data-sumome-discover-grid-rows"),this.isVertical="vertical"===this.injectElement.attr("data-sumome-discover-grid-orientation")),this.isVertical?(this.gridColumns=this.settings.grid_rows,this.gridRows=this.settings.grid_columns):(this.gridColumns=this.settings.grid_columns,this.gridRows=this.settings.grid_rows),this.gridColumnsAttr&&(this.isVertical&&this.gridColumnsAttr>0&&this.gridColumnsAttr<5||!this.isVertical&&this.gridColumnsAttr>3&&this.gridColumnsAttr<7)&&(this.gridColumns=this.gridColumnsAttr),this.gridRowsAttr&&(this.isVertical&&this.gridRowsAttr>3&&this.gridRowsAttr<7||!this.isVertical&&this.gridRowsAttr>0&&this.gridRowsAttr<5)&&(this.gridRows=this.gridRowsAttr),t.ajax({type:"POST",dataType:"json",url:this.api.properties.sumoUrl+"/apps/discover/articles",data:{site_id:this.api.properties.siteId,href:window.location.href||null,articles:this.gridColumns*this.gridRows},xhrFields:{withCredentials:!1},crossDomain:!0}).done(t.proxy(function(e){e&&"success"in e&&e.success&&"articles"in e&&e.articles&&e.articles.length&&(this.settings.links=e.articles,this.render(),"scrollbox"==this.settings.display_mode?t(window).bind("scroll.discover",r.debounce(t.proxy(function(e){var r=t(window).height(),i=t(document).height(),n=t(window).scrollTop(),s=i-r,o=n/s;o=Math.max(0,o),o=Math.min(1,o);var a=t(".sumome-discover-service-scrollbox"),u=this.settings.scrollbox_trigger/100,l=Math.min(100,Math.max(0,u));a.css("bottom",o>=l?10:0-(a.outerHeight()+20))},this),300)):t(window).on("resize.sumome-discover",r.debounce(function(t){n.render()},300)))},this))}},remove:function f(){this.settings.grid_inject||(t(".sumome-discover-service-grid").replaceWith("<a data-sumome-discover-grid></a>"),this.injectElement=t("[data-sumome-discover-grid]").first(),this.injectElement.length||(this.injectElement=null)),t(".sumome-discover-service").remove()},render:function c(){this.remove();var r=this.settings.articles,n=[],s={headline:this.settings.headline_font,grid:this.settings.grid_title_font,scrollbox:this.settings.scrollbox_title_font};t.each(s,function(t,e){e?(e=e.split(":"),e={fontFamily:e[0],fontWeight:e[1]},n.push(e.fontFamily.split(",")[0].replace(/ /g,"+")+":"+e.fontWeight)):e={fontFamily:"",fontWeight:""},s[t]=e});var o=this.settings.links.slice(0),a=this.settings.background_color,u;a&&(u="light"==i.lightOrDark(a)?i.shadeColor(a,-50):i.shadeColor(a,50));for(var l=window.location.hostname,f=0;f<o.length;f++){var c=o[f];if("url"in c&&c.url&&c.discoverSetting&&"utm"in c.discoverSetting&&c.discoverSetting.utm)try{var p=e(c.url);"utm_source"in c.discoverSetting&&c.discoverSetting.utm_source&&(p.removeQuery("utm_source"),p.addQuery("utm_source",c.discoverSetting.utm_source.replace("{source}",l))),"utm_medium"in c.discoverSetting&&c.discoverSetting.utm_medium&&(p.removeQuery("utm_medium"),p.addQuery("utm_medium",c.discoverSetting.utm_medium.replace("{source}",l))),"utm_name"in c.discoverSetting&&c.discoverSetting.utm_name&&(p.removeQuery("utm_campaign"),p.addQuery("utm_campaign",c.discoverSetting.utm_name.replace("{source}",l))),c.url=p.toString()}catch(d){}}if("grid"===this.settings.display_mode){var h=Math.min(window.screen.availWidth||t(window).width(),t(window).width()),m="mobile";h>480&&(m="desktop");var g=t("<div>").addClass("sumome-discover-service-grid-header"),y=t("<div>").addClass("sumome-discover-service-grid-title").css("color",this.settings.grid_title_color).css(s.grid).html(this.settings.grid_title);g.append(y),this.settings.pro||this.settings.starter||g.append(t("<div>").addClass("sumome-discover-service-grid-powered-by").css("float",this.isVertical?"left":"right").append(t("<a>").text("Powered by SumoMe").css("color",u).attr({target:"_blank",href:this.settings.reflink})));var v=t("<div>").addClass("sumome-discover-service sumome-discover-service-grid sumome-discover-service-grid-desktop").append(g).css({backgroundColor:a,visibility:"hidden"});a||v.addClass("sumome-discover-service-no-back");var b="100%",_=!0,w,x,B,T,S;o.length<this.gridColumns&&null===this.settings.network_id&&(this.gridColumns=o.length),"desktop"===m?b=(100/this.gridColumns).toString()+"%":(this.gridColumns=2,this.gridRows=Math.ceil(o.length/2),b=(100/this.gridColumns).toString()+"%");for(var f=0;f<this.gridRows;f++){_=!0,w=t("<div>").addClass("sumome-discover-service-grid-row");for(var A=0;A<this.gridColumns;A++){var E=!1;if(x=t("<div>").addClass("sumome-discover-service-grid-column"),o.length){var C=o.shift();E=!0,x.attr("title",C.title).css("width",b).data({site_id:this.api.properties.siteId,article_id:C.id,article_site_id:C.site_id,story:"story"in C,url:C.url}),B=t("<div>").addClass("sumome-discover-service-grid-image").css("background-image","url('"+C.image+"')"),T=t("<div>").addClass("sumome-discover-service-grid-headline").css("color",this.settings.headline_color).css(s.headline).text(C.title),S=t("<div>").addClass("sumome-discover-service-grid-source").css("color",u).text(C.source),x.append(B,T,S),_=!1}(E||"desktop"===m)&&w.append(x)}_||v.append(w)}!this.settings.grid_inject&&this.injectElement?this.injectElement.unstatic().replaceWith(v):r.append(v),t(".sumome-discover-service-grid-column").on("click",t.proxy(function(e){var r=t(e.currentTarget).data(),i=t.param({href:window.location.href||null,site_id:r.site_id,article_id:r.article_id,article_site_id:r.article_site_id,story:r.story,cache:Math.random()}),n=this.api.properties.sumoUrl+"/apps/discover/article/click/?"+i,s=t("<img>").attr("src",n).attr("alt","").hide();t(document.body).append(s),window.open(r.url,"_blank")},this));var O=v.find(".sumome-discover-service-grid-image");O.css("height",Math.floor(.75*O.outerWidth())),v.css("visibility","visible")}if("scrollbox"===this.settings.display_mode){var C=o.shift(),k=t("<div>").addClass("sumome-discover-service-scrollbox-title").css("color",this.settings.scrollbox_title_color).css(s.scrollbox).html(this.settings.scrollbox_title),I=t("<div>").addClass("sumome-discover-service-scrollbox-image").css("background-image","url('"+C.image+"')"),P=t("<div>").addClass("sumome-discover-service-scrollbox-headline").css("color",this.settings.headline_color).css(s.headline).text(C.title),Q=t("<div>").addClass("sumome-discover-service-scrollbox-source").css("color",u).text(C.source),j=t("<div>").addClass("sumome-discover-service sumome-discover-service-scrollbox").attr("title",C.title).append(k,I,P,Q).css({backgroundColor:a,visibility:"hidden",bottom:-300}).data({site_id:this.api.properties.siteId,article_id:C.id,article_site_id:C.site_id,story:"story"in C,url:C.url});this.settings.pro||this.settings.starter||j.append(t("<div>").addClass("sumome-discover-service-scrollbox-powered-by").append(t("<a>").text("Powered by SumoMe").css("color",u).attr({target:"_blank",href:this.settings.reflink}))),t("body").append(j),j.css({bottom:0-(j.outerHeight()+20),visibility:"visible"}),t(".sumome-discover-service-scrollbox").on("click",t.proxy(function(e){var r=t(e.currentTarget).data(),i=t.param({href:window.location.href||null,site_id:r.site_id,article_id:r.article_id,article_site_id:r.article_site_id,story:r.story,cache:Math.random()}),n=this.api.properties.sumoUrl+"/apps/discover/article/click/?"+i,s=t("<img>").attr("src",n).attr("alt","").hide();t(document.body).append(s),window.open(r.url,"_blank")},this))}n.length&&t("body").append('<link href="//fonts.googleapis.com/css?family='+n.join("|")+'" type="text/css" rel="stylesheet">')}};return n}),sumo.define("7df4df4a-9b26-4b6d-bdcf-d9475b2cfcc9/service",["jquery","7df4df4a-9b26-4b6d-bdcf-d9475b2cfcc9/discover"],function(t,e){return function(t){var r=function(r,i){sumo.require(["plugins/css!../css/sumome-discover-service.css"],function(){e.api=t,e.initialize(),i()})},i=function(t){t()};return{init:r,destroy:i}}}),sumo.define("7df4df4a-9b26-4b6d-bdcf-d9475b2cfcc9/service",function(){})}(void 0,void 0);